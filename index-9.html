<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hepta-SVT - Ù…Ù†ØµØ© Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
    <style>
:root {
    --primary: #6366f1;
    --secondary: #06b6d4;
    --accent: #f59e0b;
    --success: #10b981;
    --danger: #ef4444;
    --dark: #0f172a;
    --white: #ffffff;
    --gray: #64748b;
    --gradient-main: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: 'Cairo', sans-serif;
    background: var(--dark);
    color: var(--white);
    line-height: 1.6;
    min-height: 100vh;
}

.bg-animation {
    position: fixed;
    inset: 0;
    z-index: 0;
    opacity: 0.15;
    pointer-events: none;
}

.bg-animation::before, .bg-animation::after {
    content: '';
    position: absolute;
    border-radius: 50%;
    filter: blur(100px);
    animation: float 20s infinite ease-in-out;
}

.bg-animation::before {
    width: 600px;
    height: 600px;
    background: var(--primary);
    top: -200px;
    right: -200px;
}

.bg-animation::after {
    width: 500px;
    height: 500px;
    background: var(--secondary);
    bottom: -150px;
    left: -150px;
    animation-delay: 5s;
}

@keyframes float {
    0%, 100% { transform: translate(0, 0); }
    25% { transform: translate(50px, -50px); }
    50% { transform: translate(-30px, 30px); }
    75% { transform: translate(40px, 40px); }
}

.navbar {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 70px;
    background: rgba(15, 23, 42, 0.9);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
    z-index: 1000;
}

.menu-btn {
    width: 45px;
    height: 45px;
    background: var(--gradient-main);
    border: none;
    border-radius: 12px;
    cursor: pointer;
    font-size: 24px;
    color: var(--white);
}

.logo-text {
    font-size: 22px;
    font-weight: 700;
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.sidebar {
    position: fixed;
    top: 0;
    right: -320px;
    width: 320px;
    height: 100vh;
    background: rgba(15, 23, 42, 0.95);
    backdrop-filter: blur(30px);
    padding: 90px 20px 20px;
    transition: 0.3s;
    z-index: 999;
    overflow-y: auto;
}

.sidebar.active { right: 0; }

.sidebar-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    opacity: 0;
    visibility: hidden;
    transition: 0.3s;
    z-index: 998;
}

.sidebar-overlay.active {
    opacity: 1;
    visibility: visible;
}

.sidebar-item {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 10px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 15px;
    transition: 0.3s;
}

.sidebar-item:hover, .sidebar-item.active {
    background: var(--gradient-main);
}

.main {
    margin-top: 70px;
    padding: 5px 20px 30px 20px;
    position: relative;
    z-index: 1;
    min-height: calc(100vh - 70px);
}

.page {
    display: none;
    animation: fadeInUp 0.5s;
    padding-top: 0;
    margin-top: 0;
}

.page > h2:first-child,
.page > .hero:first-child {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

.page.active { display: block; }

@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}

.hero {
    background: var(--gradient-main);
    border-radius: 16px;
    padding: 50px 40px;
    text-align: center;
    margin-bottom: 40px;
}

.hero-title {
    font-size: 42px;
    font-weight: 800;
    margin-bottom: 15px;
}

.cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 25px;
    margin-bottom: 30px;
}

.card {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 30px;
    cursor: pointer;
    transition: 0.3s;
    display: flex;
    flex-direction: column;
    min-height: 280px;
}

.card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
}

.card-icon {
    width: 60px;
    height: 60px;
    background: var(--gradient-main);
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    margin-bottom: 20px;
}

.card-title {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 10px;
}

.card-description {
    font-size: 14px;
    color: var(--gray);
}

.back-btn {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 10px 20px;
    border-radius: 10px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: var(--white);
    margin-bottom: 20px;
    transition: 0.3s;
}

.back-btn:hover {
    background: rgba(255, 255, 255, 0.15);
}

.btn {
    padding: 14px 30px;
    border-radius: 12px;
    font-size: 15px;
    font-weight: 700;
    cursor: pointer;
    border: none;
    transition: 0.3s;
    font-family: 'Cairo', sans-serif;
}

.btn-primary {
    background: var(--gradient-main);
    color: var(--white);
    box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
}

.btn-ghost {
    background: transparent;
    border: 2px solid rgba(255, 255, 255, 0.2);
    color: var(--gray);
}

.btn-ghost:hover {
    border-color: var(--primary);
    color: var(--primary);
}

.btn-warning {
    background: linear-gradient(135deg, #f59e0b, #f97316);
    color: var(--white);
}

.btn-danger {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    color: var(--white);
}

/* Game HUD */
.game-hud {
    position: fixed;
    top: 70px;
    left: 0;
    right: 0;
    background: rgba(15, 23, 42, 0.95);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding: 12px 20px;
    z-index: 999;
    display: none;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}

.game-hud.active {
    display: grid;
}

.hud-item {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 10px;
    text-align: center;
}

.hud-label {
    font-size: 10px;
    color: var(--gray);
    text-transform: uppercase;
    margin-bottom: 3px;
}

.hud-value {
    font-family: 'Orbitron', sans-serif;
    font-size: 20px;
    font-weight: 700;
    color: var(--primary);
}

.hud-value.points { color: var(--accent); }
.hud-value.timer { color: var(--success); }

/* Levels Grid */
.levels-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 20px;
    max-width: 900px;
    margin: 0 auto;
}

.level-card {
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 30px 20px;
    text-align: center;
    cursor: pointer;
    transition: 0.3s;
    position: relative;
}

.level-card:not(.locked):hover {
    transform: translateY(-5px);
    border-color: var(--primary);
    box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
}

.level-card.locked {
    opacity: 0.4;
    cursor: not-allowed;
}

.level-number {
    font-size: 48px;
    font-weight: 900;
    font-family: 'Orbitron', sans-serif;
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 10px;
}

.level-label {
    font-size: 14px;
    color: var(--gray);
}

.level-stars {
    margin-top: 10px;
    font-size: 20px;
}

.level-lock {
    position: absolute;
    top: 15px;
    left: 15px;
    font-size: 24px;
}

/* Game Content */
.game-content {
    margin-top: 100px;
    max-width: 900px;
    margin-left: auto;
    margin-right: auto;
}

.question-card {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 30px;
}

.clue-box {
    background: rgba(6, 182, 212, 0.1);
    border: 1px solid rgba(6, 182, 212, 0.2);
    border-radius: 12px;
    padding: 25px;
    margin-bottom: 30px;
    text-align: center;
}

.clue-label {
    font-size: 12px;
    color: var(--secondary);
    text-transform: uppercase;
    margin-bottom: 10px;
    font-weight: 700;
}

.clue-text {
    font-size: 22px;
    font-weight: 700;
}

.answer-section {
    margin-bottom: 25px;
}

.answer-label {
    font-size: 13px;
    color: var(--gray);
    margin-bottom: 15px;
    text-align: center;
}

.answer-slots {
    display: flex;
    gap: 6px;
    justify-content: center;
    flex-wrap: nowrap;
    min-height: 65px;
    background: rgba(0, 0, 0, 0.2);
    border: 2px dashed rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    padding: 12px 10px;
    direction: ltr;
    overflow-x: auto;
}

.answer-slots.correct {
    border-color: var(--success);
    background: rgba(16, 185, 129, 0.1);
}

.answer-slots.wrong {
    border-color: var(--danger);
    animation: shake 0.5s;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
}

.empty-slot {
    min-width: 45px;
    width: 45px;
    height: 52px;
    background: rgba(99, 102, 241, 0.1);
    border: 2px solid rgba(99, 102, 241, 0.3);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 26px;
    font-weight: 900;
    font-family: 'Orbitron', sans-serif;
    color: var(--primary);
    flex-shrink: 0;
    animation: popIn 0.3s;
}

.empty-slot.filled {
    background: rgba(99, 102, 241, 0.2);
    border-color: var(--primary);
    cursor: pointer;
}

.empty-slot.filled:hover {
    transform: scale(1.1);
}

.empty-slot.hint {
    background: rgba(16, 185, 129, 0.2);
    border-color: var(--success);
    color: var(--success);
}

@keyframes popIn {
    from { transform: scale(0); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.choices-section {
    margin-bottom: 20px;
}

.choices-label {
    font-size: 13px;
    color: var(--gray);
    margin-bottom: 15px;
    text-align: center;
}

.letter-choices {
    display: flex;
    gap: 8px;
    justify-content: center;
    flex-wrap: wrap;
    padding: 20px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 12px;
    direction: ltr;
}

.letter-btn {
    width: 52px;
    height: 56px;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(99, 102, 241, 0.1));
    border: 2px solid rgba(99, 102, 241, 0.4);
    border-radius: 12px;
    color: var(--white);
    font-size: 24px;
    font-weight: 900;
    font-family: 'Orbitron', sans-serif;
    cursor: pointer;
    transition: 0.2s;
}

.letter-btn:hover:not(:disabled) {
    transform: translateY(-4px) scale(1.05);
    border-color: var(--primary);
}

.letter-btn:disabled {
    opacity: 0.2;
    cursor: not-allowed;
}

.game-actions {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
}

/* Feedback */
.feedback-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(10px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 3000;
}

.feedback-overlay.active { display: flex; }

.feedback-card {
    background: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.95));
    border: 2px solid rgba(99, 102, 241, 0.3);
    border-radius: 24px;
    padding: 40px;
    text-align: center;
    animation: bounceIn 0.5s;
    max-width: 90%;
}

@keyframes bounceIn {
    0% { transform: scale(0.5); opacity: 0; }
    70% { transform: scale(1.05); }
    100% { transform: scale(1); opacity: 1; }
}

.feedback-icon {
    font-size: 70px;
    margin-bottom: 15px;
}

.feedback-title {
    font-size: 28px;
    font-weight: 900;
    margin-bottom: 10px;
}

.feedback-title.success { color: var(--success); }

.feedback-msg {
    font-size: 15px;
    color: var(--gray);
    margin-bottom: 15px;
}

.feedback-points {
    background: rgba(245, 158, 11, 0.15);
    border: 1px solid rgba(245, 158, 11, 0.3);
    border-radius: 12px;
    padding: 10px 18px;
    font-size: 16px;
    font-weight: 700;
    color: var(--accent);
    margin-bottom: 20px;
    display: inline-block;
}

/* Level Complete */
.level-complete {
    max-width: 600px;
}

.level-complete-title {
    font-size: 36px;
    font-weight: 900;
    margin-bottom: 20px;
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.level-stats {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 25px;
}

.stat-row {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.stat-row:last-child {
    border-bottom: none;
}

.stat-label {
    color: var(--gray);
}

.stat-value {
    font-weight: 700;
    font-family: 'Orbitron', sans-serif;
    color: var(--accent);
}

/* Leaderboard */
.leaderboard {
    max-width: 700px;
    margin: 0 auto;
}

.leaderboard-title {
    font-size: 32px;
    font-weight: 800;
    margin-bottom: 25px;
    text-align: center;
}

.leaderboard-table {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
}

.leaderboard-row {
    display: grid;
    grid-template-columns: 70px 1fr 110px 100px;
    gap: 15px;
    padding: 18px 20px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    align-items: center;
    transition: 0.3s;
}

.leaderboard-row:hover:not(.header) {
    background: rgba(255, 255, 255, 0.03);
}

.leaderboard-row:last-child {
    border-bottom: none;
}

.leaderboard-row.header {
    background: rgba(99, 102, 241, 0.15);
    font-weight: 700;
    font-size: 13px;
    color: var(--gray);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.leaderboard-rank {
    font-size: 28px;
    font-weight: 900;
    font-family: 'Orbitron', sans-serif;
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-align: center;
}

.leaderboard-name {
    font-weight: 600;
    font-size: 16px;
}

.leaderboard-score {
    font-family: 'Orbitron', sans-serif;
    color: var(--success);
    font-weight: 700;
    font-size: 18px;
    text-align: center;
}

.leaderboard-time {
    font-family: 'Orbitron', sans-serif;
    font-size: 15px;
    color: var(--accent);
    font-weight: 600;
    text-align: center;
}

/* Popup */
.popup {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.9);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 3000;
    padding: 20px;
}

.popup.active { display: flex; }

.popup-content {
    position: relative;
    max-width: 90%;
    max-height: 85vh;
}

.popup-img {
    max-width: 100%;
    max-height: 85vh;
    border-radius: 16px;
}

.popup-close {
    position: absolute;
    top: -50px;
    left: -50px;
    width: 50px;
    height: 50px;
    background: var(--white);
    color: var(--dark);
    border: none;
    border-radius: 50%;
    font-size: 24px;
    cursor: pointer;
}

/* Responsive */
@media (max-width: 768px) {
    .hero-title { font-size: 32px; }
    .cards-grid { grid-template-columns: 1fr; }
    .game-hud { grid-template-columns: repeat(2, 1fr); gap: 8px; padding: 10px; }
    .hud-value { font-size: 18px; }
    .empty-slot { min-width: 38px; width: 38px; height: 46px; font-size: 22px; }
    .letter-btn { width: 46px; height: 50px; font-size: 20px; }
    .answer-slots { gap: 4px; }
    .question-card { padding: 20px; }
    .leaderboard-row { grid-template-columns: 50px 1fr 90px 80px; gap: 10px; padding: 12px 15px; }
    .feedback-card { padding: 30px 25px; }
}

@media (max-width: 480px) {
    .empty-slot { min-width: 32px; width: 32px; height: 40px; font-size: 18px; }
    .answer-slots { gap: 3px; padding: 10px 5px; }
}
</style>
</head>
<body>
<div class="bg-animation"></div>

<!-- Navbar -->
<nav class="navbar">
    <button class="menu-btn" onclick="toggleSidebar()">â˜°</button>
    <h1 class="logo-text">Hepta-SVT</h1>
    <div id="userNameDisplay" style="display:none;font-size:13px;font-weight:600;background:rgba(255,255,255,0.08);padding:6px 12px;border-radius:8px;">
        ğŸ‘¤ <span id="userNameText"></span>
    </div>
</nav>

<!-- Sidebar -->
<div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>
<aside class="sidebar" id="sidebar">
    <div class="sidebar-item active" onclick="navigateTo('dashboard')">
        <span>ğŸ </span>
        <span>Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
    </div>
    <div class="sidebar-item" onclick="navigateTo('lessons')">
        <span>ğŸ“š</span>
        <span>Ø§Ù„Ø¯Ø±ÙˆØ³</span>
    </div>
    <div class="sidebar-item" onclick="navigateTo('tests')">
        <span>âœï¸</span>
        <span>Ø§Ø®ØªØ¨Ø± Ù†ÙØ³Ùƒ</span>
    </div>
    <div class="sidebar-item" onclick="navigateTo('laboratory')">
        <span>ğŸ§ª</span>
        <span>Ø§Ù„Ù…Ø®ØªØ¨Ø±</span>
    </div>
    <div class="sidebar-item" onclick="navigateTo('exercises')">
        <span>ğŸ“</span>
        <span>Ø³Ù„Ø§Ø³Ù„ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†</span>
    </div>
    <div class="sidebar-item" onclick="navigateTo('videos')">
        <span>ğŸ¥</span>
        <span>ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ØªØ¹Ù„ÙŠÙ…ÙŠØ©</span>
    </div>
</aside>

<!-- HUD -->
<div class="game-hud" id="gameHud">
    <div class="hud-item">
        <div class="hud-label">Ø§Ù„Ù…Ø³ØªÙˆÙ‰</div>
        <div class="hud-value" id="hudLevel">1</div>
    </div>
    <div class="hud-item">
        <div class="hud-label">Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</div>
        <div class="hud-value" id="hudQuestion">1/10</div>
    </div>
    <div class="hud-item">
        <div class="hud-label">Ø§Ù„Ù†Ù‚Ø§Ø·</div>
        <div class="hud-value points" id="hudPoints">0</div>
    </div>
    <div class="hud-item">
        <div class="hud-label">Ø§Ù„ÙˆÙ‚Øª</div>
        <div class="hud-value timer" id="hudTimer">00:00</div>
    </div>
</div>

<!-- Main -->
<main class="main">

<!-- Name Input Screen -->
<section id="nameScreen" class="page active">
    <div style="max-width:500px;margin:80px auto;text-align:center;">
        <div style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:50px 40px;">
            <div style="font-size:70px;margin-bottom:15px;">ğŸ‘‹</div>
            <h2 style="font-size:32px;font-weight:800;margin-bottom:10px;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ!</h2>
            <p style="color:var(--gray);margin-bottom:30px;">Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ø¨Ø¯Ø¡</p>
            
            <input type="text" id="firstName" placeholder="Ø§Ù„Ø§Ø³Ù…..." maxlength="20" 
                   style="width:100%;padding:15px 20px;background:rgba(255,255,255,0.05);border:2px solid rgba(255,255,255,0.1);border-radius:12px;color:var(--white);font-size:18px;font-family:'Cairo',sans-serif;margin-bottom:15px;text-align:center;"
                   onkeyup="checkNameInput()">
            
            <input type="text" id="lastName" placeholder="Ø§Ù„Ù†Ø³Ø¨..." maxlength="20"
                   style="width:100%;padding:15px 20px;background:rgba(255,255,255,0.05);border:2px solid rgba(255,255,255,0.1);border-radius:12px;color:var(--white);font-size:18px;font-family:'Cairo',sans-serif;margin-bottom:15px;text-align:center;"
                   onkeyup="checkNameInput()" onkeypress="if(event.key==='Enter') submitName()">
            
            <div id="nameError" style="display:none;background:rgba(239,68,68,0.15);border:1px solid rgba(239,68,68,0.3);border-radius:12px;padding:15px;margin-bottom:20px;font-size:14px;color:var(--danger);">
                âš ï¸ Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù… Ù…Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙØ¹Ù„! Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ø³Ù… Ø¢Ø®Ø±
            </div>
            
            <button class="btn btn-primary" id="startBtn" onclick="submitName()" disabled>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ© ğŸš€</button>
        </div>
    </div>
</section>

<!-- Dashboard -->

<section id="dashboard" class="page">
    
    <!-- Fixed Welcome Section -->
    <div style="text-align:center;margin-bottom:40px;">
        <p style="font-size:18px;color:rgba(255,255,255,0.7);margin-bottom:8px;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ</p>
        <h1 style="font-size:48px;font-weight:900;margin:0 0 10px;background:linear-gradient(135deg,#6366f1,#8b5cf6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">Hepta-SVT</h1>
        <p style="font-size:16px;color:rgba(255,255,255,0.6);max-width:500px;margin:0 auto;">Ù…Ù†ØµØ© Ø®Ø§ØµØ© Ø¨Ù…Ø§Ø¯Ø© Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶</p>
    </div>
    
    <!-- Rotating Cards Container (No Arrows) -->
    <div style="position:relative;max-width:650px;margin:0 auto;">
        <div style="position:relative;min-height:480px;">
            
            <!-- Card 1: Ù…Ù„Ø®ØµØ§Øª Ø§Ù„Ø¯Ø±ÙˆØ³ -->
            <div class="carousel-slide" style="position:absolute;width:100%;opacity:1;visibility:visible;z-index:2;transition:opacity 0.6s ease;padding:45px;background:linear-gradient(135deg,rgba(59,130,246,0.15),rgba(37,99,235,0.05));border:2px solid rgba(59,130,246,0.3);border-radius:20px;text-align:center;">
                <div style="width:90px;height:90px;background:linear-gradient(135deg,#3b82f6,#2563eb);border-radius:22px;display:flex;align-items:center;justify-content:center;font-size:48px;margin:0 auto 30px;box-shadow:0 10px 30px rgba(59,130,246,0.3);">ğŸ“š</div>
                <h3 style="font-size:32px;font-weight:800;margin-bottom:18px;color:white;">Ù…Ù„Ø®ØµØ§Øª Ø§Ù„Ø¯Ø±ÙˆØ³</h3>
                <p style="font-size:17px;line-height:1.9;color:rgba(255,255,255,0.85);margin-bottom:30px;">
                    Ø§Ø³ØªÙƒØ´Ù Ù…Ù„Ø®ØµØ§Øª Ø´Ø§Ù…Ù„Ø© ÙˆÙ…ÙØµÙ„Ø©<br>
                    Ù„Ø¬Ù…ÙŠØ¹ Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…Ù†Ù‡Ø¬
                </p>
                <div style="padding:18px;background:rgba(0,0,0,0.25);border-radius:14px;margin-bottom:25px;">
                    <span style="font-size:16px;color:rgba(255,255,255,0.8);">ğŸ“– 6 Ø¯Ø±ÙˆØ³ Ù…ØªØ§Ø­Ø©</span>
                </div>
                <button onclick="navigateTo('lessons')" class="btn btn-primary" style="width:100%;padding:18px;font-size:18px;font-weight:700;border-radius:14px;">
                    Ø´Ø§Ù‡Ø¯ Ø§Ù„Ù…Ù„Ø®ØµØ§Øª â†’
                </button>
            </div>
            
            <!-- Card 2: Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª -->
            <div class="carousel-slide" style="position:absolute;width:100%;opacity:0;visibility:hidden;z-index:1;transition:opacity 0.6s ease;padding:45px;background:linear-gradient(135deg,rgba(16,185,129,0.15),rgba(5,150,105,0.05));border:2px solid rgba(16,185,129,0.3);border-radius:20px;text-align:center;">
                <div style="width:90px;height:90px;background:linear-gradient(135deg,#10b981,#059669);border-radius:22px;display:flex;align-items:center;justify-content:center;font-size:48px;margin:0 auto 30px;box-shadow:0 10px 30px rgba(16,185,129,0.3);">âœï¸</div>
                <h3 style="font-size:32px;font-weight:800;margin-bottom:18px;color:white;">Ø§Ø®ØªØ¨Ø± ØªÙ…ÙƒÙ†Ùƒ</h3>
                <p style="font-size:17px;line-height:1.9;color:rgba(255,255,255,0.85);margin-bottom:30px;">
                    Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ø¹Ø±ÙÙŠØ© ÙˆÙ…Ù‡Ø§Ø±ÙŠØ©<br>
                    Ù„Ù‚ÙŠØ§Ø³ Ù…Ø³ØªÙˆØ§Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
                </p>
                <div style="padding:18px;background:rgba(0,0,0,0.25);border-radius:14px;margin-bottom:25px;">
                    <span style="font-size:16px;color:rgba(255,255,255,0.8);">ğŸ“Š Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©</span>
                </div>
                <button onclick="navigateTo('tests')" class="btn btn-primary" style="width:100%;padding:18px;font-size:18px;font-weight:700;background:linear-gradient(135deg,#10b981,#059669);border-radius:14px;">
                    Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± â†’
                </button>
            </div>
            
            <!-- Card 3: Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ØªØ±Ø¨ÙˆÙŠØ© -->
            <div class="carousel-slide" style="position:absolute;width:100%;opacity:0;visibility:hidden;z-index:1;transition:opacity 0.6s ease;padding:45px;background:linear-gradient(135deg,rgba(249,115,22,0.15),rgba(234,88,12,0.05));border:2px solid rgba(249,115,22,0.3);border-radius:20px;text-align:center;">
                <div style="width:90px;height:90px;background:linear-gradient(135deg,#f97316,#ea580c);border-radius:22px;display:flex;align-items:center;justify-content:center;font-size:48px;margin:0 auto 30px;box-shadow:0 10px 30px rgba(249,115,22,0.3);">ğŸ®</div>
                <h3 style="font-size:32px;font-weight:800;margin-bottom:18px;color:white;">Ø£Ù„Ø¹Ø§Ø¨ ØªØ±Ø¨ÙˆÙŠØ©</h3>
                <p style="font-size:17px;line-height:1.9;color:rgba(255,255,255,0.85);margin-bottom:30px;">
                    Ø§Ù„Ø¹Ø¨ Ø§Ù„Ø¢Ù† ÙˆØ­Ø³Ù‘Ù† ØªØ±ØªÙŠØ¨Ùƒ<br>
                    ØªØ¹Ù„Ù… Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ù…ØªØ¹Ø© ÙˆØªÙØ§Ø¹Ù„ÙŠØ©
                </p>
                <div style="padding:18px;background:rgba(0,0,0,0.25);border-radius:14px;margin-bottom:25px;">
                    <span style="font-size:16px;color:rgba(255,255,255,0.8);">ğŸ† ØªÙ†Ø§ÙØ³ Ù…Ø¹ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†</span>
                </div>
                <button onclick="navigateTo('levelsScreen')" class="btn btn-primary" style="width:100%;padding:18px;font-size:18px;font-weight:700;background:linear-gradient(135deg,#f97316,#ea580c);border-radius:14px;">
                    Ø§Ù„Ø¹Ø¨ Ø§Ù„Ø¢Ù† â†’
                </button>
            </div>
            
            <!-- Card 4: Ø§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© -->
            <div class="carousel-slide" style="position:absolute;width:100%;opacity:0;visibility:hidden;z-index:1;transition:opacity 0.6s ease;padding:45px;background:linear-gradient(135deg,rgba(236,72,153,0.15),rgba(219,39,119,0.05));border:2px solid rgba(236,72,153,0.3);border-radius:20px;text-align:center;">
                <div style="width:90px;height:90px;background:linear-gradient(135deg,#ec4899,#db2777);border-radius:22px;display:flex;align-items:center;justify-content:center;font-size:48px;margin:0 auto 30px;box-shadow:0 10px 30px rgba(236,72,153,0.3);">ğŸ”¬</div>
                <h3 style="font-size:32px;font-weight:800;margin-bottom:18px;color:white;">ØªØ¬Ø§Ø±Ø¨ ØªÙØ§Ø¹Ù„ÙŠØ©</h3>
                <p style="font-size:17px;line-height:1.9;color:rgba(255,255,255,0.85);margin-bottom:30px;">
                    Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø¯Ø±Ø³ Ø£ÙƒØ«Ø± Ù…ØªØ¹Ø©<br>
                    Ù…Ù† Ø®Ù„Ø§Ù„ ØªØ¬Ø§Ø±Ø¨ Ø¹Ù„Ù…ÙŠØ© ØªÙØ§Ø¹Ù„ÙŠØ©
                </p>
                <div style="padding:18px;background:rgba(0,0,0,0.25);border-radius:14px;margin-bottom:25px;">
                    <span style="font-size:16px;color:rgba(255,255,255,0.8);">ğŸ§ª ØªØ¬Ø§Ø±Ø¨ Ù…Ø°Ù‡Ù„Ø©</span>
                </div>
                <button onclick="navigateTo('laboratory')" class="btn btn-primary" style="width:100%;padding:18px;font-size:18px;font-weight:700;background:linear-gradient(135deg,#ec4899,#db2777);border-radius:14px;">
                    Ø§Ø³ØªÙƒØ´Ù Ø§Ù„ØªØ¬Ø§Ø±Ø¨ â†’
                </button>
            </div>
            
            <!-- Card 5: Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„Ù…Ù†ØµØ© -->
            <div class="carousel-slide" style="position:absolute;width:100%;opacity:0;visibility:hidden;z-index:1;transition:opacity 0.6s ease;padding:45px;background:linear-gradient(135deg,rgba(168,85,247,0.15),rgba(147,51,234,0.05));border:2px solid rgba(168,85,247,0.3);border-radius:20px;text-align:center;">
                <div style="width:90px;height:90px;background:linear-gradient(135deg,#a855f7,#9333ea);border-radius:22px;display:flex;align-items:center;justify-content:center;font-size:48px;margin:0 auto 30px;box-shadow:0 10px 30px rgba(168,85,247,0.3);">â­</div>
                <h3 style="font-size:32px;font-weight:800;margin-bottom:18px;color:white;">Ø¬Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù†ØµØ©</h3>
                <p style="font-size:17px;line-height:1.9;color:rgba(255,255,255,0.85);margin-bottom:30px;">
                    60 Ù…Ù„Ù PDF ØªÙ…Ø§Ø±ÙŠÙ†<br>
                    ÙˆØ§Ù…ØªØ­Ø§Ù†Ø§Øª Ø¬Ù‡ÙˆÙŠØ© Ù…ØªØ§Ø­Ø© Ø§Ù„Ø¢Ù†!
                </p>
                <div style="padding:18px;background:rgba(0,0,0,0.25);border-radius:14px;margin-bottom:25px;">
                    <span style="font-size:16px;color:rgba(255,255,255,0.8);">ğŸ†• ØªÙ… Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙŠÙˆÙ…</span>
                </div>
                <button onclick="navigateTo('exercises')" class="btn btn-primary" style="width:100%;padding:18px;font-size:18px;font-weight:700;background:linear-gradient(135deg,#a855f7,#9333ea);border-radius:14px;">
                    Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ø¢Ù† â†’
                </button>
            </div>
            
        </div>
        
        <!-- Dots Navigation -->
        <div style="display:flex;justify-content:center;gap:12px;margin-top:35px;">
            <div class="carousel-dot" onclick="goToCard(0)" style="width:14px;height:14px;border-radius:50%;background:var(--primary);cursor:pointer;transition:all 0.3s;transform:scale(1.3);"></div>
            <div class="carousel-dot" onclick="goToCard(1)" style="width:14px;height:14px;border-radius:50%;background:rgba(255,255,255,0.3);cursor:pointer;transition:all 0.3s;"></div>
            <div class="carousel-dot" onclick="goToCard(2)" style="width:14px;height:14px;border-radius:50%;background:rgba(255,255,255,0.3);cursor:pointer;transition:all 0.3s;"></div>
            <div class="carousel-dot" onclick="goToCard(3)" style="width:14px;height:14px;border-radius:50%;background:rgba(255,255,255,0.3);cursor:pointer;transition:all 0.3s;"></div>
            <div class="carousel-dot" onclick="goToCard(4)" style="width:14px;height:14px;border-radius:50%;background:rgba(255,255,255,0.3);cursor:pointer;transition:all 0.3s;"></div>
        </div>
        
    </div>
</section>

<!-- Lessons -->
<section id="lessons" class="page">
    <h2 style="margin-bottom:25px;font-size:28px;">ğŸ“š Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…ØªØ§Ø­Ø©</h2>
    <div class="cards-grid">
        <div class="card" onclick="openLesson('nervous')">
            <div class="card-icon">ğŸ§ </div>
            <h3 class="card-title">Le systÃ¨me nerveux</h3>
            <p class="card-description">Ø¯Ø±Ø§Ø³Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø¹ØµØ¨ÙŠ</p>
        </div>
        <div class="card" onclick="openLesson('muscular')">
            <div class="card-icon">ğŸ’ª</div>
            <h3 class="card-title">Le systÃ¨me musculaire</h3>
            <p class="card-description">ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø¯ÙˆØ± Ø§Ù„Ø¹Ø¶Ù„Ø§Øª</p>
        </div>
        <div class="card" onclick="showImage('microbes.jpg')">
            <div class="card-icon">ğŸ¦ </div>
            <h3 class="card-title">Les microbes</h3>
            <p class="card-description">Ø¹Ø§Ù„Ù… Ø§Ù„ÙƒØ§Ø¦Ù†Ø§Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©</p>
        </div>
        <div class="card" onclick="openLesson('immune')">
            <div class="card-icon">ğŸ›¡ï¸</div>
            <h3 class="card-title">Le systÃ¨me immunitaire</h3>
            <p class="card-description">Ø§Ù„Ù…Ù†Ø§Ø¹Ø© Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© ÙˆØ§Ù„Ù…ÙƒØªØ³Ø¨Ø©</p>
        </div>
        <div class="card" onclick="openLesson('dysfunction')">
            <div class="card-icon">ğŸ”´</div>
            <h3 class="card-title">Dysfonctionnements immunitaires</h3>
            <p class="card-description">Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ© ÙˆØ§Ù„Ø¥ÙŠØ¯Ø²</p>
        </div>
        <div class="card" onclick="showImage('transfusion.jpg')">
            <div class="card-icon">ğŸ’‰</div>
            <h3 class="card-title">La transfusion sanguine</h3>
            <p class="card-description">ÙØµØ§Ø¦Ù„ Ø§Ù„Ø¯Ù… ÙˆÙ†Ù‚Ù„ Ø§Ù„Ø¯Ù…</p>
        </div>
    </div>
</section>

<!-- Lesson Details -->
<section id="lessonDetails" class="page">
    <button class="back-btn" onclick="navigateTo('lessons')">â†’ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¯Ø±ÙˆØ³</button>
    <h2 id="lessonTitle" style="margin-bottom:25px;font-size:28px;"></h2>
    <div class="cards-grid" id="lessonParagraphs"></div>
</section>

<!-- Tests -->
<section id="tests" class="page">
    <h2 style="margin-top:0;margin-bottom:30px;font-size:28px;">âœï¸ Ø§Ø®ØªØ¨Ø± Ù†ÙØ³Ùƒ</h2>
    <div class="cards-grid">
        <div class="card" onclick="navigateTo('knowledgeTests')">
            <div class="card-icon" style="background:linear-gradient(135deg,#3b82f6,#2563eb);">ğŸ“</div>
            <h3 class="card-title">Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ø¹Ø±ÙÙŠØ©</h3>
            <p class="card-description">Ø§Ø®ØªØ¨Ø± Ù…Ø¹Ø±ÙØªÙƒ Ø§Ù„Ù†Ø¸Ø±ÙŠØ© ÙÙŠ 3 Ù…Ø³ØªÙˆÙŠØ§Øª</p>
        </div>
        <div class="card" onclick="navigateTo('skillTests')">
            <div class="card-icon" style="background:linear-gradient(135deg,#10b981,#059669);">ğŸ¯</div>
            <h3 class="card-title">Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ù‡Ø§Ø±ÙŠØ©</h3>
            <p class="card-description">Ø§Ø®ØªØ¨Ø± Ù‚Ø¯Ø±ØªÙƒ Ø¹Ù„Ù‰ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„ÙŠ</p>
        </div>
        <div class="card" onclick="navigateTo('levelsScreen')">
            <div class="card-icon" style="background:linear-gradient(135deg,#f97316,#ea580c);">ğŸ®</div>
            <h3 class="card-title">Ø£Ù„Ø¹Ø§Ø¨ ØªØ±Ø¨ÙˆÙŠØ©</h3>
            <p class="card-description">ØªØ¹Ù„Ù… ÙˆØªØ³Ù„Ù‰ ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙˆÙ‚Øª</p>
        </div>
    </div>
</section>

<!-- Knowledge Tests (Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ø¹Ø±ÙÙŠØ©) -->
<section id="knowledgeTests" class="page">
    <button class="back-btn" onclick="navigateTo('tests')">â†’ Ø§Ù„Ø±Ø¬ÙˆØ¹</button>
    <h2 style="margin-top:0;margin-bottom:30px;font-size:28px;">ğŸ“ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ø¹Ø±ÙÙŠØ©</h2>
    <div style="max-width:900px;margin:0 auto;">
        <div class="cards-grid">
            <div class="card" onclick="startKnowledgeQuiz('easy')">
                <div class="card-icon" style="background:linear-gradient(135deg,#10b981,#059669);">ğŸ˜Š</div>
                <h3 class="card-title">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø³Ù‡Ù„</h3>
                <p class="card-description">20 Ø³Ø¤Ø§Ù„Ø§Ù‹<br>15 Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© Ù„Ù„Ù†Ø¬Ø§Ø­</p>
            </div>
            <div class="card" onclick="startKnowledgeQuiz('medium')">
                <div class="card-icon" style="background:linear-gradient(135deg,#f59e0b,#f97316);">ğŸ¤”</div>
                <h3 class="card-title">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…ØªÙˆØ³Ø·</h3>
                <p class="card-description">30 Ø³Ø¤Ø§Ù„Ø§Ù‹ (QCM + ØµØ­/Ø®Ø·Ø£ + ØµÙ„ Ø¨Ø³Ù‡Ù…)<br>25 Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© Ù„Ù„Ù†Ø¬Ø§Ø­</p>
            </div>
            <div class="card" onclick="startKnowledgeQuiz('hard')">
                <div class="card-icon" style="background:linear-gradient(135deg,#ef4444,#dc2626);">ğŸ˜¤</div>
                <h3 class="card-title">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹Ø¨</h3>
                <p class="card-description">40 Ø³Ø¤Ø§Ù„Ø§Ù‹ (6 Ø£Ù†ÙˆØ§Ø¹ Ù…ØªÙ†ÙˆØ¹Ø©)<br>35 Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© Ù„Ù„Ù†Ø¬Ø§Ø­</p>
            </div>
        </div>
    </div>
</section>

<!-- Skill Tests (Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ù‡Ø§Ø±ÙŠØ©) -->
<section id="skillTests" class="page">
    <button class="back-btn" onclick="navigateTo('tests')">â†’ Ø§Ù„Ø±Ø¬ÙˆØ¹</button>
    <h2 style="margin-top:0;margin-bottom:30px;font-size:28px;">ğŸ¯ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ù‡Ø§Ø±ÙŠØ©</h2>
    <div style="max-width:900px;margin:0 auto;">
        <div class="cards-grid">
            <div class="card" style="opacity:0.6;cursor:not-allowed;">
                <div class="card-icon" style="background:linear-gradient(135deg,#10b981,#059669);">ğŸ˜Š</div>
                <h3 class="card-title">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø³Ù‡Ù„</h3>
                <p class="card-description">Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªØ·Ø¨ÙŠÙ‚ÙŠØ© Ø¨Ø³ÙŠØ·Ø©</p>
                <div style="margin-top:10px;padding:5px 12px;background:var(--accent);border-radius:20px;display:inline-block;font-size:12px;">Ù‚Ø±ÙŠØ¨Ø§Ù‹</div>
            </div>
            <div class="card" style="opacity:0.6;cursor:not-allowed;">
                <div class="card-icon" style="background:linear-gradient(135deg,#f59e0b,#f97316);">ğŸ¤”</div>
                <h3 class="card-title">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…ØªÙˆØ³Ø·</h3>
                <p class="card-description">Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªØ·Ø¨ÙŠÙ‚ÙŠØ© Ù…ØªÙˆØ³Ø·Ø©</p>
                <div style="margin-top:10px;padding:5px 12px;background:var(--accent);border-radius:20px;display:inline-block;font-size:12px;">Ù‚Ø±ÙŠØ¨Ø§Ù‹</div>
            </div>
            <div class="card" style="opacity:0.6;cursor:not-allowed;">
                <div class="card-icon" style="background:linear-gradient(135deg,#ef4444,#dc2626);">ğŸ˜¤</div>
                <h3 class="card-title">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹Ø¨</h3>
                <p class="card-description">Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªØ·Ø¨ÙŠÙ‚ÙŠØ© ØµØ¹Ø¨Ø©</p>
                <div style="margin-top:10px;padding:5px 12px;background:var(--accent);border-radius:20px;display:inline-block;font-size:12px;">Ù‚Ø±ÙŠØ¨Ø§Ù‹</div>
            </div>
        </div>
    </div>
</section>

<!-- Quiz Screen -->
<section id="quizScreen" class="page">
    <button class="back-btn" onclick="navigateTo('knowledgeTests')">â†’ Ø§Ù„Ø±Ø¬ÙˆØ¹</button>
    <div style="margin-top:20px;max-width:900px;margin-left:auto;margin-right:auto;">
        <div style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:20px;margin-bottom:25px;display:grid;grid-template-columns:repeat(3,1fr);gap:15px;">
            <div style="text-align:center;">
                <div style="font-size:12px;color:var(--gray);margin-bottom:5px;">Ø§Ù„Ø³Ø¤Ø§Ù„</div>
                <div style="font-size:24px;font-weight:700;color:var(--primary);" id="quizProgress">1/20</div>
            </div>
            <div style="text-align:center;">
                <div style="font-size:12px;color:var(--gray);margin-bottom:5px;">ØµØ­ÙŠØ­Ø©</div>
                <div style="font-size:24px;font-weight:700;color:var(--success);" id="quizCorrect">0</div>
            </div>
            <div style="text-align:center;">
                <div style="font-size:12px;color:var(--gray);margin-bottom:5px;">Ø®Ø§Ø·Ø¦Ø©</div>
                <div style="font-size:24px;font-weight:700;color:var(--danger);" id="quizWrong">0</div>
            </div>
        </div>
        
        <div style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:40px;">
            <h3 style="font-size:22px;font-weight:700;margin-bottom:30px;line-height:1.8;text-align:center;" id="quizQuestion"></h3>
            <div id="quizOptions" style="display:flex;flex-direction:column;gap:15px;"></div>
            <div id="quizFeedback" style="display:none;margin-top:25px;padding:20px;border-radius:12px;"></div>
            <button id="quizNextBtn" style="display:none;margin-top:20px;width:100%;" class="btn btn-primary" onclick="nextQuizQuestion()">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ â†’</button>
        </div>
    </div>
</section>

<!-- Laboratory -->
<section id="laboratory" class="page">
    <h2 style="margin-bottom:25px;font-size:28px;">ğŸ§ª Ø§Ù„Ù…Ø®ØªØ¨Ø± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ</h2>
    <div style="text-align:center;padding:80px 20px;">
        <div style="font-size:80px;opacity:0.3;">ğŸ”¬</div>
        <h3 style="font-size:24px;margin:20px 0 10px;">Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ø¬Ø¯Ø§Ù‹!</h3>
        <p style="color:var(--gray);line-height:1.8;">
            Ù†Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø¥Ø¶Ø§ÙØ© ØªØ¬Ø§Ø±Ø¨ ØªÙØ§Ø¹Ù„ÙŠØ© Ù…Ø°Ù‡Ù„Ø©<br>
            Ø³ØªØ¬Ø¹Ù„ Ù…Ù† ÙÙ‡Ù…Ùƒ Ù„Ù„Ø¯Ø±ÙˆØ³ Ø£ÙƒØ«Ø± Ø¨Ø³Ø§Ø·Ø© ÙˆÙ…ØªØ¹Ø©
        </p>
    </div>
</section>

<!-- Exercises -->
<section id="exercises" class="page">
    <h2 style="margin-top:0;margin-bottom:35px;font-size:28px;">ğŸ“ ØªÙ…Ø§Ø±ÙŠÙ†</h2>
    
    <!-- Les fonctions de relation -->
    <div style="background:rgba(59,130,246,0.08);border:2px solid rgba(59,130,246,0.2);border-radius:18px;padding:30px;margin-bottom:25px;transition:0.3s;" onmouseover="this.style.borderColor='rgba(59,130,246,0.4)'" onmouseout="this.style.borderColor='rgba(59,130,246,0.2)'">
        <div style="display:flex;align-items:center;justify-content:space-between;cursor:pointer;" onclick="toggleExerciseSection('fonctions')">
            <div style="display:flex;align-items:center;gap:18px;">
                <div style="width:65px;height:65px;background:linear-gradient(135deg,#3b82f6,#2563eb);border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:32px;box-shadow:0 8px 20px rgba(59,130,246,0.3);">ğŸ§ </div>
                <div>
                    <h3 style="font-size:26px;font-weight:800;margin:0 0 8px;color:white;">Les fonctions de relation</h3>
                    <p style="font-size:15px;color:rgba(255,255,255,0.6);margin:0;">20 sÃ©ries d'exercices â€¢ Ø³ÙŠØ¶Ø§Ù Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
                </div>
            </div>
            <div id="fonctionsArrow" style="font-size:28px;color:rgba(255,255,255,0.4);transition:transform 0.3s;">â–¼</div>
        </div>
        
        <div id="fonctionsContent" style="display:none;margin-top:28px;padding-top:25px;border-top:2px solid rgba(59,130,246,0.15);">
            <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px;">
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 1</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 2</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 3</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 4</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 5</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 6</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 7</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 8</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 9</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 10</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 11</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 12</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 13</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 14</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 15</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 16</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 17</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 18</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 19</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 20</div>
            </div>
            <div style="margin-top:20px;padding:15px;background:rgba(251,191,36,0.1);border:1px solid rgba(251,191,36,0.3);border-radius:10px;text-align:center;">
                <span style="color:rgba(251,191,36,0.9);font-size:14px;">âš ï¸ Ø§Ù„Ù…Ù„ÙØ§Øª Ø³ØªØ¶Ø§Ù Ù‚Ø±ÙŠØ¨Ø§Ù‹</span>
            </div>
        </div>
    </div>
    
    <!-- Immunologie -->
    <div style="background:rgba(16,185,129,0.08);border:2px solid rgba(16,185,129,0.2);border-radius:18px;padding:30px;margin-bottom:25px;transition:0.3s;" onmouseover="this.style.borderColor='rgba(16,185,129,0.4)'" onmouseout="this.style.borderColor='rgba(16,185,129,0.2)'">
        <div style="display:flex;align-items:center;justify-content:space-between;cursor:pointer;" onclick="toggleExerciseSection('immunologie')">
            <div style="display:flex;align-items:center;gap:18px;">
                <div style="width:65px;height:65px;background:linear-gradient(135deg,#10b981,#059669);border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:32px;box-shadow:0 8px 20px rgba(16,185,129,0.3);">ğŸ›¡ï¸</div>
                <div>
                    <h3 style="font-size:26px;font-weight:800;margin:0 0 8px;color:white;">Immunologie</h3>
                    <p style="font-size:15px;color:rgba(255,255,255,0.6);margin:0;">20 sÃ©ries d'exercices â€¢ Ø³ÙŠØ¶Ø§Ù Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
                </div>
            </div>
            <div id="immunologieArrow" style="font-size:28px;color:rgba(255,255,255,0.4);transition:transform 0.3s;">â–¼</div>
        </div>
        
        <div id="immunologieContent" style="display:none;margin-top:28px;padding-top:25px;border-top:2px solid rgba(16,185,129,0.15);">
            <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px;">
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 1</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 2</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 3</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 4</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 5</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 6</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 7</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 8</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 9</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 10</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 11</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 12</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 13</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 14</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 15</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 16</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 17</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 18</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 19</div>
                <div style="padding:16px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;text-align:center;color:rgba(255,255,255,0.5);cursor:not-allowed;">ğŸ“„ SÃ©rie 20</div>
            </div>
            <div style="margin-top:20px;padding:15px;background:rgba(251,191,36,0.1);border:1px solid rgba(251,191,36,0.3);border-radius:10px;text-align:center;">
                <span style="color:rgba(251,191,36,0.9);font-size:14px;">âš ï¸ Ø§Ù„Ù…Ù„ÙØ§Øª Ø³ØªØ¶Ø§Ù Ù‚Ø±ÙŠØ¨Ø§Ù‹</span>
            </div>
        </div>
    </div>
    
    <!-- Les examens rÃ©gionaux -->
    <div style="background:rgba(168,85,247,0.08);border:2px solid rgba(168,85,247,0.2);border-radius:18px;padding:30px;transition:0.3s;" onmouseover="this.style.borderColor='rgba(168,85,247,0.4)'" onmouseout="this.style.borderColor='rgba(168,85,247,0.2)'">
        <div style="display:flex;align-items:center;justify-content:space-between;cursor:pointer;" onclick="toggleExerciseSection('exams')">
            <div style="display:flex;align-items:center;gap:18px;">
                <div style="width:65px;height:65px;background:linear-gradient(135deg,#a855f7,#9333ea);border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:32px;box-shadow:0 8px 20px rgba(168,85,247,0.3);">ğŸ“</div>
                <div>
                    <h3 style="font-size:26px;font-weight:800;margin:0 0 8px;color:white;">Les examens rÃ©gionaux</h3>
                    <p style="font-size:15px;color:rgba(255,255,255,0.6);margin:0;">48 examens â€¢ 2023-2025 â€¢ Ø³ÙŠØ¶Ø§Ù Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
                </div>
            </div>
            <div id="examsArrow" style="font-size:28px;color:rgba(255,255,255,0.4);transition:transform 0.3s;">â–¼</div>
        </div>
        
        <div id="examsContent" style="display:none;margin-top:28px;padding-top:25px;border-top:2px solid rgba(168,85,247,0.15);">
            
            <!-- 2025 -->
            <div style="margin-bottom:30px;">
                <div style="display:flex;align-items:center;gap:12px;margin-bottom:18px;cursor:pointer;" onclick="toggleYearSection('2025')">
                    <h4 style="font-size:20px;font-weight:700;margin:0;color:rgba(168,85,247,0.9);">ğŸ“… 2025</h4>
                    <span style="font-size:13px;color:rgba(255,255,255,0.5);">(16 examens)</span>
                    <div id="year2025Arrow" style="font-size:20px;color:rgba(255,255,255,0.4);transition:transform 0.3s;margin-left:auto;">â–¼</div>
                </div>
                <div id="year2025Content" style="display:none;padding-left:20px;">
                    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:10px;">
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Casablanca-Settat</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Rabat-SalÃ©-KÃ©nitra</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ FÃ¨s-MeknÃ¨s</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Marrakech-Safi</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ L'Oriental</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Tanger-TÃ©touan-Al HoceÃ¯ma</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ DrÃ¢a-Tafilalet</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Souss-Massa</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Guelmim-Oued Noun</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ LaÃ¢youne-Sakia El Hamra</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Dakhla-Oued Ed-Dahab</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ BÃ©ni Mellal-KhÃ©nifra</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Ø§Ù„Ø¹ÙŠÙˆÙ† Ø§Ù„Ø³Ø§Ù‚ÙŠØ© Ø§Ù„Ø­Ù…Ø±Ø§Ø¡</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Ø§Ù„Ø¯Ø§Ø®Ù„Ø© ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø°Ù‡Ø¨</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Ø¬Ù‡Ø© Ø£Ø®Ø±Ù‰ 1</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Ø¬Ù‡Ø© Ø£Ø®Ø±Ù‰ 2</div>
                    </div>
                </div>
            </div>
            
            <!-- 2024 -->
            <div style="margin-bottom:30px;">
                <div style="display:flex;align-items:center;gap:12px;margin-bottom:18px;cursor:pointer;" onclick="toggleYearSection('2024')">
                    <h4 style="font-size:20px;font-weight:700;margin:0;color:rgba(168,85,247,0.9);">ğŸ“… 2024</h4>
                    <span style="font-size:13px;color:rgba(255,255,255,0.5);">(16 examens)</span>
                    <div id="year2024Arrow" style="font-size:20px;color:rgba(255,255,255,0.4);transition:transform 0.3s;margin-left:auto;">â–¼</div>
                </div>
                <div id="year2024Content" style="display:none;padding-left:20px;">
                    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:10px;">
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Casablanca-Settat</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Rabat-SalÃ©-KÃ©nitra</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ FÃ¨s-MeknÃ¨s</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Marrakech-Safi</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ L'Oriental</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Tanger-TÃ©touan-Al HoceÃ¯ma</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ DrÃ¢a-Tafilalet</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Souss-Massa</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Guelmim-Oued Noun</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ LaÃ¢youne-Sakia El Hamra</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Dakhla-Oued Ed-Dahab</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ BÃ©ni Mellal-KhÃ©nifra</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Ø§Ù„Ø¹ÙŠÙˆÙ† Ø§Ù„Ø³Ø§Ù‚ÙŠØ© Ø§Ù„Ø­Ù…Ø±Ø§Ø¡</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Ø§Ù„Ø¯Ø§Ø®Ù„Ø© ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø°Ù‡Ø¨</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Ø¬Ù‡Ø© Ø£Ø®Ø±Ù‰ 1</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Ø¬Ù‡Ø© Ø£Ø®Ø±Ù‰ 2</div>
                    </div>
                </div>
            </div>
            
            <!-- 2023 -->
            <div>
                <div style="display:flex;align-items:center;gap:12px;margin-bottom:18px;cursor:pointer;" onclick="toggleYearSection('2023')">
                    <h4 style="font-size:20px;font-weight:700;margin:0;color:rgba(168,85,247,0.9);">ğŸ“… 2023</h4>
                    <span style="font-size:13px;color:rgba(255,255,255,0.5);">(16 examens)</span>
                    <div id="year2023Arrow" style="font-size:20px;color:rgba(255,255,255,0.4);transition:transform 0.3s;margin-left:auto;">â–¼</div>
                </div>
                <div id="year2023Content" style="display:none;padding-left:20px;">
                    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:10px;">
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Casablanca-Settat</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Rabat-SalÃ©-KÃ©nitra</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ FÃ¨s-MeknÃ¨s</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Marrakech-Safi</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ L'Oriental</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Tanger-TÃ©touan-Al HoceÃ¯ma</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ DrÃ¢a-Tafilalet</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Souss-Massa</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Guelmim-Oued Noun</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ LaÃ¢youne-Sakia El Hamra</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Dakhla-Oued Ed-Dahab</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ BÃ©ni Mellal-KhÃ©nifra</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Ø§Ù„Ø¹ÙŠÙˆÙ† Ø§Ù„Ø³Ø§Ù‚ÙŠØ© Ø§Ù„Ø­Ù…Ø±Ø§Ø¡</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Ø§Ù„Ø¯Ø§Ø®Ù„Ø© ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø°Ù‡Ø¨</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Ø¬Ù‡Ø© Ø£Ø®Ø±Ù‰ 1</div>
                        <div style="padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.5);cursor:not-allowed;font-size:14px;">ğŸ“„ Ø¬Ù‡Ø© Ø£Ø®Ø±Ù‰ 2</div>
                    </div>
                </div>
            </div>
            
            <div style="margin-top:25px;padding:15px;background:rgba(251,191,36,0.1);border:1px solid rgba(251,191,36,0.3);border-radius:10px;text-align:center;">
                <span style="color:rgba(251,191,36,0.9);font-size:14px;">âš ï¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø§Ù„Ø¬Ù‡ÙˆÙŠØ© Ø³ØªØ¶Ø§Ù Ù‚Ø±ÙŠØ¨Ø§Ù‹</span>
            </div>
        </div>
    </div>
    
</section>

<!-- Videos -->
<section id="videos" class="page">
    <h2 style="margin-bottom:25px;font-size:28px;">ğŸ¥ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ØªØ¹Ù„ÙŠÙ…ÙŠØ©</h2>
    <div style="text-align:center;padding:80px 20px;">
        <div style="font-size:80px;opacity:0.3;">ğŸ¥</div>
        <h3 style="font-size:24px;margin:20px 0 10px;">Ù…Ø­ØªÙˆÙ‰ Ù‚Ø§Ø¯Ù…!</h3>
        <p style="color:var(--gray);">Ø³Ù†Ø¶ÙŠÙ Ù…ÙƒØªØ¨Ø© Ù…Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
    </div>
</section>

<!-- Levels Selection -->
<section id="levelsScreen" class="page">
    <button class="back-btn" onclick="navigateTo('tests')">â†’ Ø§Ù„Ø±Ø¬ÙˆØ¹</button>
    <div style="text-align:center;margin-bottom:25px;">
        <button class="btn btn-primary" onclick="showLeaderboard()" style="padding:12px 25px;">ğŸ† Ù„Ø§Ø¦Ø­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†</button>
    </div>
    <h2 style="font-size:32px;font-weight:800;text-align:center;margin-bottom:30px;">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰</h2>
    <div class="levels-grid" id="levelsGrid"></div>
</section>

<!-- Game Screen -->
<section id="gameScreen" class="page">
    <div class="game-content">
        <div class="question-card">
            <div class="clue-box">
                <div class="clue-label">ğŸ’¡ Ø§Ù„Ø¯Ù„ÙŠÙ„ / L'indice</div>
                <div class="clue-text" id="clueText"></div>
            </div>
            
            <div class="answer-section">
                <div class="answer-label">âœï¸ Ø±ØªÙ‘Ø¨ Ø§Ù„Ø­Ø±ÙˆÙ Ù‡Ù†Ø§</div>
                <div class="answer-slots" id="answerSlots"></div>
            </div>
            
            <div class="choices-section">
                <div class="choices-label">ğŸ”¡ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ù…ØªØ§Ø­Ø©</div>
                <div class="letter-choices" id="letterChoices"></div>
            </div>
            
            <div class="game-actions">
                <button class="btn btn-ghost" onclick="resetLetters()">â†º Ø¥Ø¹Ø§Ø¯Ø©</button>
                <button class="btn btn-warning" onclick="useHint()" id="hintBtn">ğŸ’¡ Ù…Ø³Ø§Ø¹Ø¯Ø© (-5)</button>
                <button class="btn btn-danger" onclick="skipQuestion()">â­ ØªØ®Ø·ÙŠ (-10)</button>
                <button class="btn btn-primary" onclick="checkAnswer()">âœ” ØªØ­Ù‚Ù‚</button>
            </div>
        </div>
    </div>
</section>

<!-- Leaderboard -->
<section id="leaderboardScreen" class="page">
    <button class="back-btn" onclick="navigateTo('levelsScreen')">â†’ Ø§Ù„Ø±Ø¬ÙˆØ¹</button>
    <div class="leaderboard">
        <h2 class="leaderboard-title">ğŸ† Ù„Ø§Ø¦Ø­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†</h2>
        <div class="leaderboard-table">
            <div class="leaderboard-row header">
                <div>Ø§Ù„ØªØ±ØªÙŠØ¨</div>
                <div>Ø§Ù„Ø§Ø³Ù…</div>
                <div>Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                <div>Ø§Ù„ÙˆÙ‚Øª</div>
            </div>
            <div id="leaderboardList"></div>
        </div>
    </div>
</section>

</main>

<!-- Feedback -->
<div class="feedback-overlay" id="feedback"></div>

<script>
// === LESSONS DATA ===
const lessonsData = {
    nervous: {
        title: 'ğŸ§  Le systÃ¨me nerveux',
        paragraphs: [
            { title: "L'organisation", image: 'nervous_1.jpg' },
            { title: 'La sensibilitÃ© consciente', image: 'nervous_2.jpg' },
            { title: 'La motricitÃ© volontaire', image: 'nervous_3.jpg' },
            { title: 'MotricitÃ© involontaire', image: 'nervous_4.jpg' },
            { title: 'HygiÃ¨ne', image: 'nervous_5.jpg' }
        ]
    },
    muscular: {
        title: 'ğŸ’ª Le systÃ¨me musculaire',
        paragraphs: [
            { title: 'RÃ´le du muscle', image: 'muscular_1.jpg' },
            { title: 'Structure', image: 'muscular_2.jpg' },
            { title: 'Besoins', image: 'muscular_3.jpg' }
        ]
    },
    immune: {
        title: 'ğŸ›¡ï¸ Le systÃ¨me immunitaire',
        paragraphs: [
            { title: 'ImmunitÃ© naturelle', image: 'immune_1.jpg' },
            { title: 'ImmunitÃ© spÃ©cifique', image: 'immune_2.jpg' },
            { title: 'Organes lymphoÃ¯des', image: 'immune_3.jpg' },
            { title: 'Renforcement', image: 'immune_4.jpg' }
        ]
    },
    dysfunction: {
        title: 'ğŸ”´ Dysfonctionnements immunitaires',
        paragraphs: [
            { title: 'Allergies', image: 'dysfunction_1.jpg' },
            { title: 'SIDA', image: 'dysfunction_2.jpg' }
        ]
    }
};

// === GAME DATA ===
const levelsData = [
    // Level 1
    [
        { answer: 'CERVEAU', clue: 'centre nerveux / Ù…Ø±ÙƒØ² Ø¹ØµØ¨ÙŠ', extra: ['T','M','N','K','P','X','B','L','A','R','D','F','G'] },
        { answer: 'MOELLE EPINIERE', clue: 'centre nerveux central / Ù…Ø±ÙƒØ² Ø¹ØµØ¨ÙŠ Ù…Ø±ÙƒØ²ÙŠ', extra: ['X','T','K','A','B'] },
        { answer: 'NERFS', clue: 'organe nerveux pÃ©riphÃ©rique / Ø¹Ø¶Ùˆ Ø¹ØµØ¨ÙŠ Ù…Ø­ÙŠØ·ÙŠ', extra: ['T','M','A','K','L','X','B','P','D','G','H','J','Q','W','Z'] },
        { answer: 'CORPS CELLULAIRE', clue: 'situÃ© dans la substance grise / ÙŠÙ‚Ø¹ ÙÙŠ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠØ©', extra: ['X','T','K','M'] },
        { answer: 'AXONE', clue: 'situÃ© dans la substance blanche / ÙŠÙ‚Ø¹ ÙÙŠ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡', extra: ['R','T','M','L','P','K','B','D','F','G','H','J','Q','W','Z'] },
        { answer: 'FIBRE NERVEUSE', clue: 'unitÃ© structurelle du nerf / ÙˆØ­Ø¯Ø© Ø¨Ù†ÙŠÙˆÙŠØ© Ù„Ù„Ø¹ØµØ¨', extra: ['X','T','K','M','L','P'] },
        { answer: 'NEURONE', clue: 'cellule nerveuse / Ø§Ù„Ø®Ù„ÙŠØ© Ø§Ù„Ø¹ØµØ¨ÙŠØ©', extra: ['B','M','T','X','K','A','L','P','D','F','G','H','J'] },
        { answer: 'SYNAPSE', clue: 'zone entre deux neurones / Ù…Ù†Ø·Ù‚Ø© Ø¨ÙŠÙ† Ø¹ØµØ¨ÙˆÙ†ÙŠÙ†', extra: ['K','L','M','T','X','B','D','F','G','H','J','Q','W'] },
        { answer: 'GANGLION SPINAL', clue: 'situÃ© au niveau de la racine dorsale / ÙŠÙ‚Ø¹ Ø¹Ù†Ø¯ Ø§Ù„Ø¬Ø°Ø± Ø§Ù„Ø¸Ù‡Ø±ÙŠ', extra: ['X','T','K','M','B'] },
        { answer: 'NERF MIXTE', clue: 'transmet l\'influx nerveux sensitif et moteur / ÙŠÙ†Ù‚Ù„ Ø§Ù„Ø³ÙŠØ§Ù„Ø© Ø§Ù„Ø¹ØµØ¨ÙŠØ© Ø§Ù„Ø­Ø³ÙŠØ© ÙˆØ§Ù„Ø­Ø±ÙƒÙŠØ©', extra: ['B','K','A','L','P','D','G','H','J','Q'] }
    ],
    // Levels 2-10 (temporary placeholder data)
    ...Array(9).fill([
        { answer: 'CERVEAU', clue: 'Ø³Ø¤Ø§Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠ - Ù‚Ø±ÙŠØ¨Ø§Ù‹', extra: ['T','M','N','K','P','X','B','L','A','R','D','F','G'] },
        { answer: 'NEURONE', clue: 'Ø³Ø¤Ø§Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠ - Ù‚Ø±ÙŠØ¨Ø§Ù‹', extra: ['X','B','L','K','A','T','M','P','D','F','G','H','J'] },
        { answer: 'REFLEXE', clue: 'Ø³Ø¤Ø§Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠ - Ù‚Ø±ÙŠØ¨Ø§Ù‹', extra: ['M','T','A','P','W','K','B','D','F','G','H','J','Q'] },
        { answer: 'MUSCLE', clue: 'Ø³Ø¤Ø§Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠ - Ù‚Ø±ÙŠØ¨Ø§Ù‹', extra: ['T','B','N','D','P','X','A','K','F','G','H','J','Q','W'] },
        { answer: 'VACCIN', clue: 'Ø³Ø¤Ø§Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠ - Ù‚Ø±ÙŠØ¨Ø§Ù‹', extra: ['X','R','T','M','L','P','B','K','D','F','G','H','J','Q'] },
        { answer: 'MICROBE', clue: 'Ø³Ø¤Ø§Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠ - Ù‚Ø±ÙŠØ¨Ø§Ù‹', extra: ['K','A','T','S','X','P','D','F','G','H','J','Q','W','Z'] },
        { answer: 'SANG', clue: 'Ø³Ø¤Ø§Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠ - Ù‚Ø±ÙŠØ¨Ø§Ù‹', extra: ['B','P','T','M','R','K','L','X','D','F','G','H','J','Q','W','Z'] },
        { answer: 'SYSTEME', clue: 'Ø³Ø¤Ø§Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠ - Ù‚Ø±ÙŠØ¨Ø§Ù‹', extra: ['A','B','K','T','X','M','P','D','F','G','H','J','Q'] },
        { answer: 'IMMUNE', clue: 'Ø³Ø¤Ø§Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠ - Ù‚Ø±ÙŠØ¨Ø§Ù‹', extra: ['X','K','T','A','B','P','D','F','G','H','J','Q','W','Z'] },
        { answer: 'ORGANE', clue: 'Ø³Ø¤Ø§Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠ - Ù‚Ø±ÙŠØ¨Ø§Ù‹', extra: ['X','B','M','K','T','P','D','F','G','H','J','Q','W','Z'] }
    ])
];

// Game State
const gameState = {
    playerName: 'Player',
    currentLevel: 0,
    currentQuestion: 0,
    points: 0,
    startTime: 0,
    selectedLetters: [],
    availableLetters: [],
    isChecking: false,
    hintedPositions: [],
    currentAnswer: ''
};

// === STORAGE FUNCTIONS ===
function loadProgress() {
    const saved = localStorage.getItem('heptaGameProgress');
    if (saved) return JSON.parse(saved);
    return { unlockedLevels: 1, levelStars: {}, bestScores: {} };
}

function saveProgress(progress) {
    localStorage.setItem('heptaGameProgress', JSON.stringify(progress));
}

function loadLeaderboard() {
    const saved = localStorage.getItem('heptaLeaderboard');
    if (saved) return JSON.parse(saved);
    return [];
}

function saveLeaderboard(leaderboard) {
    localStorage.setItem('heptaLeaderboard', JSON.stringify(leaderboard));
}

// === NAME INPUT ===
function checkNameInput() {
    const firstName = document.getElementById('firstName').value.trim();
    const lastName = document.getElementById('lastName').value.trim();
    const btn = document.getElementById('startBtn');
    const error = document.getElementById('nameError');
    
    if (firstName.length >= 2 && lastName.length >= 2) {
        btn.disabled = false;
        
        // Check if name exists
        const fullName = firstName + ' ' + lastName;
        const leaderboard = loadLeaderboard();
        const exists = leaderboard.some(entry => entry.name.toLowerCase() === fullName.toLowerCase());
        
        if (exists) {
            error.style.display = 'block';
        } else {
            error.style.display = 'none';
        }
    } else {
        btn.disabled = true;
        error.style.display = 'none';
    }
}

function submitName() {
    const firstName = document.getElementById('firstName').value.trim();
    const lastName = document.getElementById('lastName').value.trim();
    
    if (firstName.length < 2 || lastName.length < 2) {
        alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù†Ø³Ø¨ (Ø­Ø±ÙÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„ÙƒÙ„ Ù…Ù†Ù‡Ù…Ø§)');
        return;
    }
    
    const fullName = firstName + ' ' + lastName;
    
    // Check if name exists
    const leaderboard = loadLeaderboard();
    const exists = leaderboard.some(entry => entry.name.toLowerCase() === fullName.toLowerCase());
    
    if (exists) {
        alert('Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù… Ù…Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙØ¹Ù„! Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ø³Ù… Ø¢Ø®Ø±');
        return;
    }
    
    // Save name
    gameState.playerName = fullName;
    localStorage.setItem('heptaPlayerName', fullName);
    
    // Show name in navbar
    document.getElementById('userNameText').textContent = fullName;
    document.getElementById('userNameDisplay').style.display = 'block';
    
    // Update dashboard name
    const dashboardNameEl = document.getElementById('dashboardName');
    if (dashboardNameEl) dashboardNameEl.textContent = firstName;
    
    // Show welcome message
    const overlay = document.getElementById('feedback');
    overlay.innerHTML = `
        <div class="feedback-card">
            <div class="feedback-icon">ğŸ‰</div>
            <div class="feedback-title success">Ù…Ø±Ø­Ø¨Ø§Ù‹ ${firstName}!</div>
            <div class="feedback-msg">Ù†ØªÙ…Ù†Ù‰ Ù„Ùƒ ØªØ¬Ø±Ø¨Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù…Ù…ØªØ¹Ø© ğŸŒŸ</div>
        </div>
    `;
    overlay.classList.add('active');
    
    setTimeout(() => {
        overlay.classList.remove('active');
        navigateTo('dashboard');
        setTimeout(() => initCardRotation(), 200);
    }, 2000);
}

// Check if user already logged in
window.addEventListener('DOMContentLoaded', () => {
    const savedName = localStorage.getItem('heptaPlayerName');
    if (savedName) {
        gameState.playerName = savedName;
        document.getElementById('userNameText').textContent = savedName;
        document.getElementById('userNameDisplay').style.display = 'block';
        
        // Update dashboard name
        const firstName = savedName.split(' ')[0];
        const dashboardNameEl = document.getElementById('dashboardName');
        if (dashboardNameEl) dashboardNameEl.textContent = firstName;
        
        // Update game slide based on progress
        const progress = loadProgress();
        const gameSlideText = document.getElementById('gameSlideText');
        const gameSlideStatus = document.getElementById('gameSlideStatus');
        
        if (gameSlideText && gameSlideStatus) {
            const highestLevel = progress.unlockedLevels || 1;
            const totalStars = Object.values(progress.levelStars || {}).reduce((a, b) => a + b, 0);
            
            if (highestLevel > 1 || totalStars > 0) {
                gameSlideText.innerHTML = `ğŸ”¥ Ø­Ø³Ù‘Ù† Ù†ØªÙŠØ¬ØªÙƒ!<br>Ø§Ù„Ù…Ø³ØªÙˆÙ‰: ${highestLevel} | â­ ${totalStars}`;
                gameSlideStatus.textContent = 'ÙˆØ§ØµÙ„ Ø§Ù„Ù„Ø¹Ø¨';
            } else {
                gameSlideText.innerHTML = `ğŸ® Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ø¯ÙŠ!<br>Ù„Ù… ØªØ¬Ø±Ø¨ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¹Ø¯ØŸ`;
                gameSlideStatus.textContent = 'Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†';
            }
        }
        
        navigateTo('dashboard');
        setTimeout(() => initCardRotation(), 200);
    }
});

// === DASHBOARD CAROUSEL ROTATION ===
let currentCardIndex = 0;
let cardRotationTimer;

function showCard(index) {
    const cards = document.querySelectorAll('.carousel-slide');
    const dots = document.querySelectorAll('.carousel-dot');
    
    if (!cards.length) return;
    
    cards.forEach((card, i) => {
        if (i === index) {
            card.style.opacity = '1';
            card.style.zIndex = '2';
            card.style.visibility = 'visible';
        } else {
            card.style.opacity = '0';
            card.style.zIndex = '1';
            card.style.visibility = 'hidden';
        }
    });
    
    dots.forEach((dot, i) => {
        if (i === index) {
            dot.style.background = 'var(--primary)';
            dot.style.transform = 'scale(1.3)';
        } else {
            dot.style.background = 'rgba(255,255,255,0.3)';
            dot.style.transform = 'scale(1)';
        }
    });
}

function nextCard() {
    currentCardIndex = (currentCardIndex + 1) % 5;
    showCard(currentCardIndex);
}

function goToCard(index) {
    currentCardIndex = index;
    showCard(currentCardIndex);
    resetCardTimer();
}

function startCardRotation() {
    cardRotationTimer = setInterval(() => {
        nextCard();
    }, 3000);
}

function stopCardRotation() {
    if (cardRotationTimer) {
        clearInterval(cardRotationTimer);
        cardRotationTimer = null;
    }
}

function resetCardTimer() {
    stopCardRotation();
    startCardRotation();
}

function initCardRotation() {
    const dashboard = document.getElementById('dashboard');
    if (dashboard && dashboard.classList.contains('active')) {
        showCard(0);
        startCardRotation();
    }
}

// === NAVIGATION ===
function toggleSidebar() {
    document.getElementById('sidebar').classList.toggle('active');
    document.getElementById('sidebarOverlay').classList.toggle('active');
}

function closeSidebar() {
    document.getElementById('sidebar').classList.remove('active');
    document.getElementById('sidebarOverlay').classList.remove('active');
}

function navigateTo(page) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(page).classList.add('active');
    document.getElementById('gameHud').classList.remove('active');
    
    document.querySelectorAll('.sidebar-item').forEach(item => item.classList.remove('active'));
    closeSidebar();
    window.scrollTo(0, 0);
    
    if (page === 'levelsScreen') {
        renderLevels();
    }
    
    // Control carousel
    if (page === 'dashboard') {
        setTimeout(() => initCardRotation(), 100);
    } else {
        stopCardRotation();
    }
}

// === LESSONS ===
function openLesson(key) {
    const lesson = lessonsData[key];
    document.getElementById('lessonTitle').textContent = lesson.title;
    const container = document.getElementById('lessonParagraphs');
    container.innerHTML = '';
    lesson.paragraphs.forEach(p => {
        const card = document.createElement('div');
        card.className = 'card';
        card.onclick = () => showImage(p.image, p.title);
        card.innerHTML = `
            <div class="card-icon">ğŸ“„</div>
            <h4 class="card-title">${p.title}</h4>
        `;
        container.appendChild(card);
    });
    navigateTo('lessonDetails');
}

function showImage(path) {
    const popup = document.createElement('div');
    popup.className = 'popup active';
    popup.innerHTML = `
        <div class="popup-content">
            <button class="popup-close" onclick="this.parentElement.parentElement.remove()">âœ–</button>
            <img class="popup-img" src="${path}" onerror="alert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©')">
        </div>
    `;
    document.body.appendChild(popup);
}

// === EXERCISES TOGGLE SYSTEM ===
function toggleExerciseSection(section) {
    const content = document.getElementById(section + 'Content');
    const arrow = document.getElementById(section + 'Arrow');
    
    if (content.style.display === 'none' || content.style.display === '') {
        content.style.display = 'block';
        arrow.style.transform = 'rotate(180deg)';
    } else {
        content.style.display = 'none';
        arrow.style.transform = 'rotate(0deg)';
    }
}

function toggleYearSection(year) {
    const content = document.getElementById('year' + year + 'Content');
    const arrow = document.getElementById('year' + year + 'Arrow');
    
    if (content.style.display === 'none' || content.style.display === '') {
        content.style.display = 'block';
        arrow.style.transform = 'rotate(180deg)';
    } else {
        content.style.display = 'none';
        arrow.style.transform = 'rotate(0deg)';
    }
}

// === SIMPLE QUIZ SYSTEM ===
const quizData = {
    easy: [
        {"question":"Quel organe fait partie du systÃ¨me nerveux central ?","options":["L'encÃ©phale","Le muscle","L'os"],"answer":"L'encÃ©phale"},
        {"question":"Quel est le rÃ´le des rÃ©cepteurs sensoriels dans la peau ?","options":["Produire le mouvement","Capter les stimulus extÃ©rieurs","Analyser les messages"],"answer":"Capter les stimulus extÃ©rieurs"},
        {"question":"OÃ¹ naÃ®t l'influx nerveux moteur lors d'un mouvement volontaire ?","options":["Dans l'aire motrice","Dans la moelle Ã©piniÃ¨re","Dans l'Å“il"],"answer":"Dans l'aire motrice"},
        {"question":"Le nerf sciatique est un conducteur :","options":["Uniquement sensitif","Uniquement moteur","Mixte"],"answer":"Mixte"},
        {"question":"Quel est le centre nerveux responsable des rÃ©flexes mÃ©dullaires ?","options":["Le cerveau","La moelle Ã©piniÃ¨re","Le cervelet"],"answer":"La moelle Ã©piniÃ¨re"},
        {"question":"Comment appelle-t-on l'unitÃ© structurelle du systÃ¨me nerveux ?","options":["La fibre musculaire","Le neurone","Le tendon"],"answer":"Le neurone"},
        {"question":"Quelle est la propriÃ©tÃ© du muscle qui lui permet de se raccourcir ?","options":["L'Ã©lasticitÃ©","L'excitabilitÃ©","La contractilitÃ©"],"answer":"La contractilitÃ©"},
        {"question":"Le muscle squelettique est reliÃ© Ã  l'os par :","options":["Les tendons","Les nerfs","Les vaisseaux"],"answer":"Les tendons"},
        {"question":"Quels sont les besoins de la contraction musculaire ?","options":["Glucose et OxygÃ¨ne","CO2 et Eau","Graisse et Azote"],"answer":"Glucose et OxygÃ¨ne"},
        {"question":"La zone de contact entre neurone et muscle est :","options":["L'aire de Broca","La plaque motrice","Le corps cellulaire"],"answer":"La plaque motrice"},
        {"question":"L'arc rÃ©flexe concerne quel type de mouvement ?","options":["Volontaire","Involontaire","Le sommeil"],"answer":"Involontaire"},
        {"question":"Quelle substance nuit gravement aux rÃ©flexes ?","options":["L'eau","Les vitamines","L'alcool"],"answer":"L'alcool"},
        {"question":"L'aire visuelle sert Ã  :","options":["Entendre","Voir","GoÃ»ter"],"answer":"Voir"},
        {"question":"Une fibre musculaire est une :","options":["Cellule","BactÃ©rie","ProtÃ©ine"],"answer":"Cellule"},
        {"question":"L'influx nerveux sensitif se dirige vers :","options":["Les muscles","Les centres nerveux","La peau"],"answer":"Les centres nerveux"},
        {"question":"L'organe qui exÃ©cute le mouvement est :","options":["Le nerf","Le muscle","L'Å“il"],"answer":"Le muscle"},
        {"question":"La matiÃ¨re grise du cerveau est situÃ©e en :","options":["PÃ©riphÃ©rie","Centre","Bas"],"answer":"PÃ©riphÃ©rie"},
        {"question":"Le stimulus de l'oreille est :","options":["La lumiÃ¨re","Le son","L'odeur"],"answer":"Le son"},
        {"question":"Le manque de sommeil fatigue quel systÃ¨me ?","options":["Nerveux","Digestif","Urinaire"],"answer":"Nerveux"},
        {"question":"Le cerveau est protÃ©gÃ© par :","options":["Le crÃ¢ne","La peau uniquement","Les muscles"],"answer":"Le crÃ¢ne"}
    ],
    medium: [
        {"type":"QCM","question":"Le trajet de l'influx nerveux lors d'un rÃ©flexe mÃ©dullaire est :","options":["RÃ©cepteur -> Moelle Ã©piniÃ¨re -> Muscle","RÃ©cepteur -> Cerveau -> Muscle","Cerveau -> Moelle Ã©piniÃ¨re -> Muscle"],"answer":"RÃ©cepteur -> Moelle Ã©piniÃ¨re -> Muscle"},
        {"type":"QCM","question":"L'influx nerveux sensitif est qualifiÃ© de :","options":["Centrifuge (vers la pÃ©riphÃ©rie)","CentripÃ¨te (vers le centre)","Fixe"],"answer":"CentripÃ¨te (vers le centre)"},
        {"type":"QCM","question":"La substance grise de la moelle Ã©piniÃ¨re se trouve :","options":["En pÃ©riphÃ©rie","Au centre (forme de H)","Partout"],"answer":"Au centre (forme de H)"},
        {"type":"QCM","question":"Les nerfs rachidiens sont fixÃ©s Ã  la moelle Ã©piniÃ¨re par :","options":["Une seule racine","Deux racines (antÃ©rieure et postÃ©rieure)","Trois racines"],"answer":"Deux racines (antÃ©rieure et postÃ©rieure)"},
        {"type":"QCM","question":"La racine postÃ©rieure du nerf rachidien contient :","options":["Uniquement des fibres motrices","Uniquement des fibres sensitives","Des fibres mixtes"],"answer":"Uniquement des fibres sensitives"},
        {"type":"QCM","question":"L'excitabilitÃ© d'un muscle est sa capacitÃ© Ã  :","options":["Reprendre sa forme initiale","RÃ©agir Ã  un stimulus","Se contracter fortement"],"answer":"RÃ©agir Ã  un stimulus"},
        {"type":"QCM","question":"Lorsqu'on excite la racine antÃ©rieure d'un nerf rachidien, on observe :","options":["Une douleur","Une paralysie","Une contraction musculaire"],"answer":"Une contraction musculaire"},
        {"type":"QCM","question":"Qu'est-ce qu'une synapse ?","options":["Une cellule nerveuse","Une zone de contact entre deux neurones","Un muscle"],"answer":"Une zone de contact entre deux neurones"},
        {"type":"QCM","question":"Le message nerveux est de nature :","options":["Chimique uniquement","Ã‰lectrique","MÃ©canique"],"answer":"Ã‰lectrique"},
        {"type":"QCM","question":"L'Ã©lasticitÃ© musculaire est :","options":["IllimitÃ©e","LimitÃ©e","Absente chez l'homme"],"answer":"LimitÃ©e"},
        {"type":"QCM","question":"L'aire motrice se situe :","options":["En arriÃ¨re du sillon de Rolando","En avant du sillon de Rolando","Dans le cervelet"],"answer":"En avant du sillon de Rolando"},
        {"type":"QCM","question":"Les muscles antagonistes sont des muscles qui :","options":["Agissent dans le mÃªme sens","Agissent en sens opposÃ©s","Ne travaillent jamais"],"answer":"Agissent en sens opposÃ©s"},
        {"type":"QCM","question":"Le corps cellulaire d'un neurone moteur se trouve dans :","options":["Le muscle","La substance grise","La substance blanche"],"answer":"La substance grise"},
        {"type":"QCM","question":"La plaque motrice libÃ¨re une substance appelÃ©e :","options":["Hormone","Neurotransmetteur","Sang"],"answer":"Neurotransmetteur"},
        {"type":"QCM","question":"Le rÃ©flexe permet de :","options":["RÃ©flÃ©chir Ã  une situation","ProtÃ©ger l'organisme","Apprendre Ã  lire"],"answer":"ProtÃ©ger l'organisme"},
        {"type":"QCM","question":"Le neurone est composÃ© d'un corps cellulaire, d'un axone et de dendrites.","options":["Vrai","Faux"],"answer":"Vrai"},
        {"type":"QCM","question":"Les tendons sont extensibles comme les muscles.","options":["Vrai","Faux"],"answer":"Faux"},
        {"type":"QCM","question":"La matiÃ¨re blanche contient les corps cellulaires des neurones.","options":["Vrai","Faux"],"answer":"Faux"},
        {"type":"QCM","question":"Le muscle transforme l'Ã©nergie chimique en Ã©nergie mÃ©canique.","options":["Vrai","Faux"],"answer":"Vrai"},
        {"type":"QCM","question":"L'arc rÃ©flexe nÃ©cessite l'intervention de l'aire motrice.","options":["Vrai","Faux"],"answer":"Faux"},
        {"type":"Matching","question":"Relier les organes Ã  leurs rÃ´les","left":["Moelle Ã©piniÃ¨re","Aire visuelle","Nerf moteur"],"right":["Analyse de l'influx sensitif","Conducteur centrifuge","Centre du rÃ©flexe"],"pairs":{"Moelle Ã©piniÃ¨re":"Centre du rÃ©flexe","Aire visuelle":"Analyse de l'influx sensitif","Nerf moteur":"Conducteur centrifuge"}},
        {"type":"Matching","question":"Relier les concepts aux dÃ©finitions","left":["Neurone","Fibre musculaire","Synapse"],"right":["Cellule musculaire","Zone de communication","Cellule nerveuse"],"pairs":{"Neurone":"Cellule nerveuse","Fibre musculaire":"Cellule musculaire","Synapse":"Zone de communication"}},
        {"type":"Matching","question":"Relier les propriÃ©tÃ©s musculaires","left":["Se contracter","RÃ©agir Ã  un stimulus","Reprendre sa forme"],"right":["ExcitabilitÃ©","Ã‰lasticitÃ©","ContractilitÃ©"],"pairs":{"Se contracter":"ContractilitÃ©","RÃ©agir Ã  un stimulus":"ExcitabilitÃ©","Reprendre sa forme":"Ã‰lasticitÃ©"}},
        {"type":"Matching","question":"Relier les composants du systÃ¨me","left":["EncÃ©phale","SystÃ¨me pÃ©riphÃ©rique","SystÃ¨me central"],"right":["EncÃ©phale + Moelle Ã©piniÃ¨re","Cerveau + Cervelet + Bulbe","Les nerfs"],"pairs":{"EncÃ©phale":"Cerveau + Cervelet + Bulbe","SystÃ¨me pÃ©riphÃ©rique":"Les nerfs","SystÃ¨me central":"EncÃ©phale + Moelle Ã©piniÃ¨re"}},
        {"type":"Matching","question":"Relier les activitÃ©s aux types de rÃ©ponses","left":["BrÃ»lure soudaine","Ã‰crire un message","Entendre de la musique"],"right":["SensibilitÃ© consciente","RÃ©flexe","MotricitÃ© volontaire"],"pairs":{"BrÃ»lure soudaine":"RÃ©flexe","Ã‰crire un message":"MotricitÃ© volontaire","Entendre de la musique":"SensibilitÃ© consciente"}}
    ],
    hard: [
        {"type":"QCM","question":"Une section de la racine antÃ©rieure d'un nerf rachidien entraÃ®ne :","options":["Perte de sensibilitÃ© uniquement","Paralysie musculaire uniquement","Perte de sensibilitÃ© et de motricitÃ©"],"answer":"Paralysie musculaire uniquement"},
        {"type":"QCM","question":"L'aire motrice gauche contrÃ´le :","options":["La partie droite du corps","La partie gauche du corps","Tout le corps"],"answer":"La partie droite du corps"},
        {"type":"QCM","question":"Le centre nerveux de la motricitÃ© volontaire est :","options":["La moelle Ã©piniÃ¨re","L'Ã©corce cÃ©rÃ©brale","Le muscle"],"answer":"L'Ã©corce cÃ©rÃ©brale"},
        {"type":"QCM","question":"Lors de la flexion du bras :","options":["Biceps contractÃ©, Triceps relÃ¢chÃ©","Biceps relÃ¢chÃ©, Triceps contractÃ©","Les deux sont contractÃ©s"],"answer":"Biceps contractÃ©, Triceps relÃ¢chÃ©"},
        {"type":"QCM","question":"Quelle structure contient le neurotransmetteur avant sa libÃ©ration ?","options":["Le noyau","Les vÃ©sicules synaptiques","Les dendrites"],"answer":"Les vÃ©sicules synaptiques"},
        {"type":"QCM","question":"Le stimulus spÃ©cifique des photorÃ©cepteurs est :","options":["Le son","La lumiÃ¨re","La pression"],"answer":"La lumiÃ¨re"},
        {"type":"QCM","question":"La gaine de myÃ©line sert Ã  :","options":["Ralentir l'influx","AccÃ©lÃ©rer l'influx","Nourrir le muscle"],"answer":"AccÃ©lÃ©rer l'influx"},
        {"type":"QCM","question":"L'accumulation de quelle substance cause la fatigue musculaire ?","options":["OxygÃ¨ne","Acide lactique","Glucose"],"answer":"Acide lactique"},
        {"type":"QCM","question":"La synapse neuromusculaire est aussi appelÃ©e :","options":["Plaque motrice","Ganglion spinal","Corps cellulaire"],"answer":"Plaque motrice"},
        {"type":"QCM","question":"Que signifie un nerf 'mixte' ?","options":["Sensitif et moteur","Cerveau et moelle","Muscle et os"],"answer":"Sensitif et moteur"},
        {"type":"TrueFalse","question":"La substance blanche de la moelle Ã©piniÃ¨re est situÃ©e Ã  l'extÃ©rieur de la substance grise.","answer":true},
        {"type":"TrueFalse","question":"Le curare est une substance qui stimule la contraction musculaire.","answer":false},
        {"type":"TrueFalse","question":"Le neurone est l'unitÃ© structurelle et fonctionnelle du systÃ¨me nerveux.","answer":true},
        {"type":"TrueFalse","question":"L'influx nerveux moteur circule du centre vers les organes effecteurs.","answer":true},
        {"type":"TrueFalse","question":"Une fatigue musculaire prolongÃ©e peut mener Ã  une dÃ©chirure.","answer":true},
        {"type":"TrueFalse","question":"L'influx nerveux est de nature Ã©lectrique le long de l'axone.","answer":true},
        {"type":"TrueFalse","question":"Le rÃ©flexe mÃ©dullaire nÃ©cessite l'intervention du cerveau.","answer":false},
        {"type":"TrueFalse","question":"Les tendons fixent le muscle sur l'os.","answer":true},
        {"type":"TrueFalse","question":"Le systÃ¨me nerveux central est protÃ©gÃ© par le squelette.","answer":true},
        {"type":"TrueFalse","question":"La matiÃ¨re grise contient les axones myÃ©linisÃ©s.","answer":false},
        {"type":"Ordering","question":"Ordonnez le trajet de l'influx nerveux dans une sensibilitÃ© consciente (vue) :","steps":["Stimulus (LumiÃ¨re)","RÃ©cepteur (RÃ©tine)","Conducteur (Nerf optique)","Centre (Aire visuelle)"]},
        {"type":"Ordering","question":"Ordonnez les Ã©tapes de la synapse :","steps":["ArrivÃ©e de l'influx","LibÃ©ration du neurotransmetteur","Fixation sur les rÃ©cepteurs","Naissance d'un nouvel influx"]},
        {"type":"Ordering","question":"Ordonnez les couches protectrices du cerveau (de l'extÃ©rieur vers l'intÃ©rieur) :","steps":["CrÃ¢ne","Dure-mÃ¨re","ArachnoÃ¯de","Pie-mÃ¨re"]},
        {"type":"Ordering","question":"Ordonnez les structures musculaires de la plus grande Ã  la plus petite :","steps":["Muscle","Faisceau de fibres","Fibre musculaire","Myofibrille"]},
        {"type":"Ordering","question":"Ordonnez les composants de l'encÃ©phale du haut vers le bas :","steps":["Cerveau","Cervelet","Bulbe rachidien"]},
        {"type":"Labeling","question":"Nommez les 5 Ã©lÃ©ments de l'arc rÃ©flexe :","keywords":["rÃ©cepteur","sensitif","centre","moelle","moteur","effecteur","muscle"],"elements":["RÃ©cepteur","Conducteur sensitif","Centre (moelle)","Conducteur moteur","Effecteur"]},
        {"type":"Labeling","question":"Nommez les 3 parties principales du neurone :","keywords":["corps","cellulaire","axone","arborisation","terminale","dendrite"],"elements":["Corps cellulaire","Axone","Arborisation terminale"]},
        {"type":"Labeling","question":"Identifiez les 3 types de muscles dans le corps :","keywords":["squelettique","lisse","cardiaque","striÃ©"],"elements":["Squelettique","Lisse","Cardiaque"]},
        {"type":"Labeling","question":"Nommez les 2 racines du nerf rachidien :","keywords":["antÃ©rieure","postÃ©rieure","motrice","sensitive","racine"],"elements":["Racine antÃ©rieure (motrice)","Racine postÃ©rieure (sensitive)"]},
        {"type":"Labeling","question":"Nommez 2 nutriments essentiels pour le muscle :","keywords":["glucose","oxygÃ¨ne","dioxygÃ¨ne","o2","Ã©nergie"],"elements":["Glucose","DioxygÃ¨ne (O2)"]},
        {"type":"Mention","question":"Citez 3 constituants de l'encÃ©phale :","keywords":["cerveau","cervelet","bulbe","tronc","cÃ©rÃ©bral"],"requiredCount":3},
        {"type":"Mention","question":"Citez 3 propriÃ©tÃ©s du muscle squelettique :","keywords":["excitabilitÃ©","contractilitÃ©","Ã©lasticitÃ©","extensibilitÃ©"],"requiredCount":3},
        {"type":"Mention","question":"Citez 2 substances chimiques qui perturbent la transmission nerveuse :","keywords":["alcool","drogue","nicotine","tabac","cannabis","stupÃ©fiant"],"requiredCount":2},
        {"type":"Mention","question":"Citez 3 types de rÃ©cepteurs sensoriels cutanÃ©s :","keywords":["thermorÃ©cepteur","mÃ©canorÃ©cepteur","nocicepteur","douleur","chaleur","pression","toucher"],"requiredCount":3},
        {"type":"Mention","question":"Citez 2 fonctions de la moelle Ã©piniÃ¨re :","keywords":["rÃ©flexe","centre","conducteur","message","transmission","influx"],"requiredCount":2},
        {"type":"DirectQuestion","question":"Expliquez le rÃ´le des muscles antagonistes lors d'un mouvement.","keywords":["opposition","contracte","Ã©tire","agoniste","antagoniste","mouvement","articulation"],"requiredKeywords":3},
        {"type":"DirectQuestion","question":"Pourquoi une lÃ©sion de la moelle Ã©piniÃ¨re peut-elle entraÃ®ner une paralysie des membres ?","keywords":["interrompt","transmission","influx","moteur","cerveau","muscle","lÃ©sion"],"requiredKeywords":3},
        {"type":"DirectQuestion","question":"DÃ©finissez la plaque motrice.","keywords":["synapse","jonction","neurone","moteur","fibre","musculaire","contact"],"requiredKeywords":3},
        {"type":"DirectQuestion","question":"Quel est l'effet de la consommation de drogues sur le temps de rÃ©action ?","keywords":["augmente","ralentit","temps","rÃ©action","perturbation","synapse","transmission"],"requiredKeywords":3},
        {"type":"DirectQuestion","question":"Comment le muscle produit-il l'Ã©nergie nÃ©cessaire Ã  sa contraction ?","keywords":["oxydation","glucose","oxygÃ¨ne","Ã©nergie","chaleur","rÃ©action","chimique"],"requiredKeywords":3}
    ]
};

let currentQuizLevel = 'easy';
let quizQuestions = [];
let quizIndex = 0, quizCorrect = 0, quizWrong = 0, quizAnswered = false;
let matchingConnections = {};

function startKnowledgeQuiz(level) {
    currentQuizLevel = level;
    
    if (level === 'easy') {
        quizQuestions = quizData.easy;
    } else if (level === 'medium') {
        quizQuestions = quizData.medium;
    } else if (level === 'hard') {
        quizQuestions = quizData.hard;
    } else {
        alert('Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!');
        return;
    }
    
    quizIndex = 0;
    quizCorrect = 0;
    quizWrong = 0;
    matchingConnections = {};
    navigateTo('quizScreen');
    loadQuizQuestion();
}

function loadQuizQuestion() {
    const q = quizQuestions[quizIndex];
    const totalQuestions = quizQuestions.length;
    quizAnswered = false;
    
    document.getElementById('quizProgress').textContent = `${quizIndex + 1}/${totalQuestions}`;
    document.getElementById('quizCorrect').textContent = quizCorrect;
    document.getElementById('quizWrong').textContent = quizWrong;
    document.getElementById('quizQuestion').textContent = q.question;
    
    const container = document.getElementById('quizOptions');
    container.innerHTML = '';
    container.style.display = 'flex';
    container.style.flexDirection = 'column';
    container.style.gap = '15px';
    
    // Type: QCM or default
    if (!q.type || q.type === 'QCM') {
        q.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.textContent = opt;
            btn.onclick = () => checkQuizAnswer(opt, q.answer, btn);
            btn.style.cssText = 'width:100%;padding:18px 25px;background:rgba(255,255,255,0.05);border:2px solid rgba(255,255,255,0.1);border-radius:12px;color:white;font-size:16px;font-weight:600;cursor:pointer;transition:0.3s;text-align:right;font-family:Cairo,sans-serif;';
            btn.onmouseover = () => { if (!quizAnswered) { btn.style.background = 'rgba(99,102,241,0.2)'; btn.style.borderColor = 'var(--primary)'; }};
            btn.onmouseout = () => { if (!quizAnswered) { btn.style.background = 'rgba(255,255,255,0.05)'; btn.style.borderColor = 'rgba(255,255,255,0.1)'; }};
            container.appendChild(btn);
        });
    }
    // Type: Matching
    else if (q.type === 'Matching') {
        matchingConnections = {};
        container.style.display = 'grid';
        container.style.gridTemplateColumns = '1fr 1fr';
        container.style.gap = '30px';
        
        const leftCol = document.createElement('div');
        leftCol.style.cssText = 'display:flex;flex-direction:column;gap:12px;';
        
        const rightCol = document.createElement('div');
        rightCol.style.cssText = 'display:flex;flex-direction:column;gap:12px;';
        
        // Shuffle right column
        const shuffledRight = [...q.right].sort(() => Math.random() - 0.5);
        
        q.left.forEach((item, i) => {
            const leftItem = document.createElement('div');
            leftItem.textContent = item;
            leftItem.dataset.left = item;
            leftItem.style.cssText = 'padding:16px 20px;background:rgba(59,130,246,0.15);border:2px solid rgba(59,130,246,0.3);border-radius:10px;color:white;font-size:15px;font-weight:600;cursor:pointer;transition:0.3s;position:relative;';
            leftItem.onmouseover = () => leftItem.style.background = 'rgba(59,130,246,0.25)';
            leftItem.onmouseout = () => leftItem.style.background = 'rgba(59,130,246,0.15)';
            leftItem.onclick = () => selectMatchingItem(leftItem, 'left');
            leftCol.appendChild(leftItem);
        });
        
        shuffledRight.forEach((item, i) => {
            const rightItem = document.createElement('div');
            rightItem.textContent = item;
            rightItem.dataset.right = item;
            rightItem.style.cssText = 'padding:16px 20px;background:rgba(16,185,129,0.15);border:2px solid rgba(16,185,129,0.3);border-radius:10px;color:white;font-size:15px;font-weight:600;cursor:pointer;transition:0.3s;';
            rightItem.onmouseover = () => rightItem.style.background = 'rgba(16,185,129,0.25)';
            rightItem.onmouseout = () => rightItem.style.background = 'rgba(16,185,129,0.15)';
            rightItem.onclick = () => selectMatchingItem(rightItem, 'right');
            rightCol.appendChild(rightItem);
        });
        
        container.appendChild(leftCol);
        container.appendChild(rightCol);
        
        // Add submit button for matching
        const submitBtn = document.createElement('button');
        submitBtn.textContent = 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©';
        submitBtn.className = 'btn btn-primary';
        submitBtn.style.cssText = 'grid-column:1/-1;margin-top:20px;padding:16px;font-size:17px;';
        submitBtn.onclick = () => checkMatchingAnswer(q.pairs);
        container.appendChild(submitBtn);
    }
    // Type: TrueFalse
    else if (q.type === 'TrueFalse') {
        ['Vrai', 'Faux'].forEach(opt => {
            const btn = document.createElement('button');
            btn.textContent = opt;
            const answerValue = (opt === 'Vrai') ? true : false;
            btn.onclick = () => checkQuizAnswer(answerValue, q.answer, btn, opt);
            btn.style.cssText = 'width:100%;padding:18px 25px;background:rgba(255,255,255,0.05);border:2px solid rgba(255,255,255,0.1);border-radius:12px;color:white;font-size:16px;font-weight:600;cursor:pointer;transition:0.3s;text-align:center;font-family:Cairo,sans-serif;';
            btn.onmouseover = () => { if (!quizAnswered) { btn.style.background = 'rgba(99,102,241,0.2)'; btn.style.borderColor = 'var(--primary)'; }};
            btn.onmouseout = () => { if (!quizAnswered) { btn.style.background = 'rgba(255,255,255,0.05)'; btn.style.borderColor = 'rgba(255,255,255,0.1)'; }};
            container.appendChild(btn);
        });
    }
    // Type: Ordering
    else if (q.type === 'Ordering') {
        container.style.display = 'flex';
        container.style.flexDirection = 'column';
        container.style.gap = '12px';
        
        const shuffledSteps = [...q.steps].sort(() => Math.random() - 0.5);
        const userOrder = [];
        
        shuffledSteps.forEach((step, index) => {
            const stepDiv = document.createElement('div');
            stepDiv.style.cssText = 'display:flex;align-items:center;gap:15px;padding:15px 20px;background:rgba(255,255,255,0.05);border:2px solid rgba(255,255,255,0.1);border-radius:12px;';
            
            const numberInput = document.createElement('input');
            numberInput.type = 'number';
            numberInput.min = '1';
            numberInput.max = q.steps.length;
            numberInput.placeholder = '#';
            numberInput.dataset.step = step;
            numberInput.style.cssText = 'width:50px;padding:8px;background:rgba(99,102,241,0.2);border:2px solid var(--primary);border-radius:8px;color:white;text-align:center;font-size:18px;font-weight:700;';
            
            const stepText = document.createElement('span');
            stepText.textContent = step;
            stepText.style.cssText = 'flex:1;color:white;font-size:16px;';
            
            stepDiv.appendChild(numberInput);
            stepDiv.appendChild(stepText);
            container.appendChild(stepDiv);
        });
        
        const submitBtn = document.createElement('button');
        submitBtn.textContent = 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ±ØªÙŠØ¨';
        submitBtn.className = 'btn btn-primary';
        submitBtn.style.cssText = 'margin-top:20px;padding:16px;font-size:17px;';
        submitBtn.onclick = () => checkOrderingAnswer(q.steps);
        container.appendChild(submitBtn);
    }
    // Type: Labeling
    else if (q.type === 'Labeling') {
        container.style.display = 'flex';
        container.style.flexDirection = 'column';
        container.style.gap = '15px';
        
        q.elements.forEach((element, index) => {
            const labelDiv = document.createElement('div');
            labelDiv.style.cssText = 'display:flex;flex-direction:column;gap:8px;';
            
            const label = document.createElement('label');
            label.textContent = `${index + 1}. Ã‰lÃ©ment ${index + 1} :`;
            label.style.cssText = 'color:rgba(255,255,255,0.7);font-size:14px;';
            
            const input = document.createElement('input');
            input.type = 'text';
            input.placeholder = 'Votre rÃ©ponse...';
            input.dataset.index = index;
            input.style.cssText = 'padding:12px 18px;background:rgba(255,255,255,0.05);border:2px solid rgba(255,255,255,0.1);border-radius:10px;color:white;font-size:16px;font-family:Cairo,sans-serif;';
            
            labelDiv.appendChild(label);
            labelDiv.appendChild(input);
            container.appendChild(labelDiv);
        });
        
        const submitBtn = document.createElement('button');
        submitBtn.textContent = 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª';
        submitBtn.className = 'btn btn-primary';
        submitBtn.style.cssText = 'margin-top:20px;padding:16px;font-size:17px;';
        submitBtn.onclick = () => checkLabelingAnswer(q.elements, q.keywords);
        container.appendChild(submitBtn);
    }
    // Type: Mention
    else if (q.type === 'Mention') {
        container.style.display = 'flex';
        container.style.flexDirection = 'column';
        container.style.gap = '15px';
        
        const textarea = document.createElement('textarea');
        textarea.placeholder = 'Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§... (Ø§ÙØµÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¨ÙØ§ØµÙ„Ø©)';
        textarea.rows = 4;
        textarea.style.cssText = 'padding:15px 20px;background:rgba(255,255,255,0.05);border:2px solid rgba(255,255,255,0.1);border-radius:12px;color:white;font-size:16px;font-family:Cairo,sans-serif;resize:vertical;';
        container.appendChild(textarea);
        
        const hint = document.createElement('div');
        hint.textContent = `ğŸ’¡ Conseil : Ã‰crivez ${q.requiredCount} Ã©lÃ©ments sÃ©parÃ©s par des virgules`;
        hint.style.cssText = 'color:rgba(255,255,255,0.5);font-size:13px;font-style:italic;';
        container.appendChild(hint);
        
        const submitBtn = document.createElement('button');
        submitBtn.textContent = 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©';
        submitBtn.className = 'btn btn-primary';
        submitBtn.style.cssText = 'margin-top:15px;padding:16px;font-size:17px;';
        submitBtn.onclick = () => checkMentionAnswer(textarea.value, q.keywords, q.requiredCount);
        container.appendChild(submitBtn);
    }
    // Type: DirectQuestion
    else if (q.type === 'DirectQuestion') {
        container.style.display = 'flex';
        container.style.flexDirection = 'column';
        container.style.gap = '15px';
        
        const textarea = document.createElement('textarea');
        textarea.placeholder = 'Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§...';
        textarea.rows = 6;
        textarea.style.cssText = 'padding:15px 20px;background:rgba(255,255,255,0.05);border:2px solid rgba(255,255,255,0.1);border-radius:12px;color:white;font-size:16px;font-family:Cairo,sans-serif;resize:vertical;line-height:1.6;';
        container.appendChild(textarea);
        
        const hint = document.createElement('div');
        hint.textContent = 'ğŸ’¡ Conseil : RÃ©pondez de maniÃ¨re complÃ¨te en utilisant les termes appropriÃ©s';
        hint.style.cssText = 'color:rgba(255,255,255,0.5);font-size:13px;font-style:italic;';
        container.appendChild(hint);
        
        const submitBtn = document.createElement('button');
        submitBtn.textContent = 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©';
        submitBtn.className = 'btn btn-primary';
        submitBtn.style.cssText = 'margin-top:15px;padding:16px;font-size:17px;';
        submitBtn.onclick = () => checkDirectQuestionAnswer(textarea.value, q.keywords, q.requiredKeywords);
        container.appendChild(submitBtn);
    }
    
    document.getElementById('quizFeedback').style.display = 'none';
    document.getElementById('quizNextBtn').style.display = 'none';
}

let selectedMatchingLeft = null;
let selectedMatchingRight = null;

function selectMatchingItem(element, side) {
    if (quizAnswered) return;
    
    if (side === 'left') {
        if (selectedMatchingLeft) {
            selectedMatchingLeft.style.borderColor = 'rgba(59,130,246,0.3)';
            selectedMatchingLeft.style.transform = 'scale(1)';
        }
        selectedMatchingLeft = element;
        element.style.borderColor = 'rgba(59,130,246,1)';
        element.style.transform = 'scale(1.05)';
        
        if (selectedMatchingRight) {
            createMatchingConnection();
        }
    } else {
        if (selectedMatchingRight) {
            selectedMatchingRight.style.borderColor = 'rgba(16,185,129,0.3)';
            selectedMatchingRight.style.transform = 'scale(1)';
        }
        selectedMatchingRight = element;
        element.style.borderColor = 'rgba(16,185,129,1)';
        element.style.transform = 'scale(1.05)';
        
        if (selectedMatchingLeft) {
            createMatchingConnection();
        }
    }
}

function createMatchingConnection() {
    const leftKey = selectedMatchingLeft.dataset.left;
    const rightValue = selectedMatchingRight.dataset.right;
    
    matchingConnections[leftKey] = rightValue;
    
    // Visual feedback
    selectedMatchingLeft.innerHTML = `${selectedMatchingLeft.textContent} â¡ï¸`;
    selectedMatchingRight.style.opacity = '0.6';
    
    // Reset selection
    selectedMatchingLeft.style.borderColor = 'rgba(59,130,246,0.3)';
    selectedMatchingLeft.style.transform = 'scale(1)';
    selectedMatchingRight.style.borderColor = 'rgba(16,185,129,0.3)';
    selectedMatchingRight.style.transform = 'scale(1)';
    selectedMatchingLeft = null;
    selectedMatchingRight = null;
}

function checkMatchingAnswer(correctPairs) {
    quizAnswered = true;
    
    let allCorrect = true;
    for (const [left, correctRight] of Object.entries(correctPairs)) {
        if (matchingConnections[left] !== correctRight) {
            allCorrect = false;
            break;
        }
    }
    
    const container = document.getElementById('quizOptions');
    const leftItems = container.querySelectorAll('[data-left]');
    
    leftItems.forEach(item => {
        const leftKey = item.dataset.left;
        const userAnswer = matchingConnections[leftKey];
        const correctAnswer = correctPairs[leftKey];
        
        if (userAnswer === correctAnswer) {
            item.style.background = 'rgba(16,185,129,0.2)';
            item.style.borderColor = 'var(--success)';
            item.innerHTML = `âœ… ${leftKey} â¡ï¸ ${correctAnswer}`;
        } else {
            item.style.background = 'rgba(239,68,68,0.2)';
            item.style.borderColor = 'var(--danger)';
            item.innerHTML = `âŒ ${leftKey}<br><small style="font-size:12px;opacity:0.8;">Ø§Ù„ØµÙˆØ§Ø¨: ${correctAnswer}</small>`;
        }
    });
    
    if (allCorrect) {
        quizCorrect++;
        document.getElementById('quizCorrect').textContent = quizCorrect;
        showFeedback(true, 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ØµØ­ÙŠØ­Ø©!');
    } else {
        quizWrong++;
        document.getElementById('quizWrong').textContent = quizWrong;
        showFeedback(false, 'Ø¨Ø¹Ø¶ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø®Ø§Ø·Ø¦Ø©. Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©.');
    }
    
    document.getElementById('quizNextBtn').style.display = 'block';
}

function checkQuizAnswer(selected, correct, btn) {
    if (quizAnswered) return;
    quizAnswered = true;
    
    const isCorrect = selected === correct;
    
    document.querySelectorAll('#quizOptions button').forEach(opt => {
        opt.style.cursor = 'not-allowed';
        if (opt.textContent === correct) {
            opt.style.background = 'rgba(16,185,129,0.2)';
            opt.style.borderColor = 'var(--success)';
            opt.innerHTML = 'âœ… ' + opt.textContent;
        }
        if (opt === btn && !isCorrect) {
            opt.style.background = 'rgba(239,68,68,0.2)';
            opt.style.borderColor = 'var(--danger)';
            opt.innerHTML = 'âŒ ' + opt.textContent;
        }
    });
    
    if (isCorrect) {
        quizCorrect++;
        document.getElementById('quizCorrect').textContent = quizCorrect;
        showFeedback(true, 'Ø£Ø­Ø³Ù†Øª!');
    } else {
        quizWrong++;
        document.getElementById('quizWrong').textContent = quizWrong;
        showFeedback(false, `Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: ${correct}`);
    }
    
    document.getElementById('quizNextBtn').style.display = 'block';
}

function checkOrderingAnswer(correctSteps) {
    quizAnswered = true;
    
    const container = document.getElementById('quizOptions');
    const inputs = container.querySelectorAll('input[type="number"]');
    
    const userOrder = {};
    inputs.forEach(input => {
        const position = parseInt(input.value);
        const step = input.dataset.step;
        if (position) {
            userOrder[position] = step;
        }
    });
    
    let isCorrect = true;
    for (let i = 1; i <= correctSteps.length; i++) {
        if (userOrder[i] !== correctSteps[i - 1]) {
            isCorrect = false;
            break;
        }
    }
    
    // Show correct order
    inputs.forEach((input, index) => {
        const step = input.dataset.step;
        const correctPosition = correctSteps.indexOf(step) + 1;
        const userPosition = parseInt(input.value);
        
        if (userPosition === correctPosition) {
            input.style.background = 'rgba(16,185,129,0.3)';
            input.style.borderColor = 'var(--success)';
            input.parentElement.style.borderColor = 'var(--success)';
        } else {
            input.style.background = 'rgba(239,68,68,0.3)';
            input.style.borderColor = 'var(--danger)';
            input.parentElement.style.borderColor = 'var(--danger)';
            input.value = `${userPosition || '?'} â†’ ${correctPosition}`;
        }
        input.disabled = true;
    });
    
    if (isCorrect) {
        quizCorrect++;
        document.getElementById('quizCorrect').textContent = quizCorrect;
        showFeedback(true, 'Ø§Ù„ØªØ±ØªÙŠØ¨ ØµØ­ÙŠØ­ ØªÙ…Ø§Ù…Ø§Ù‹!');
    } else {
        quizWrong++;
        document.getElementById('quizWrong').textContent = quizWrong;
        showFeedback(false, 'Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØµØ­ÙŠØ­ Ù…Ø¹Ø±ÙˆØ¶ Ø¨Ø¬Ø§Ù†Ø¨ ÙƒÙ„ Ø¹Ù†ØµØ±');
    }
    
    document.getElementById('quizNextBtn').style.display = 'block';
}

function checkLabelingAnswer(correctElements, keywords) {
    quizAnswered = true;
    
    const container = document.getElementById('quizOptions');
    const inputs = container.querySelectorAll('input[type="text"]');
    
    let correctCount = 0;
    
    inputs.forEach((input, index) => {
        const userAnswer = input.value.toLowerCase().trim();
        const correctAnswer = correctElements[index].toLowerCase();
        
        // Smart checking with keywords
        let isCorrect = false;
        
        // Check if user answer contains key parts of correct answer
        const keyParts = correctAnswer.split(/[\s(),.-]+/).filter(p => p.length > 2);
        const matchedParts = keyParts.filter(part => userAnswer.includes(part));
        
        // Also check against provided keywords
        const matchedKeywords = keywords.filter(kw => userAnswer.includes(kw.toLowerCase()));
        
        if (matchedParts.length >= Math.ceil(keyParts.length / 2) || matchedKeywords.length > 0) {
            isCorrect = true;
        }
        
        if (isCorrect) {
            correctCount++;
            input.style.background = 'rgba(16,185,129,0.2)';
            input.style.borderColor = 'var(--success)';
            input.value = `âœ… ${input.value}`;
        } else {
            input.style.background = 'rgba(239,68,68,0.2)';
            input.style.borderColor = 'var(--danger)';
            input.value = `âŒ ${input.value} â†’ ${correctElements[index]}`;
        }
        input.disabled = true;
    });
    
    const allCorrect = correctCount === correctElements.length;
    
    if (allCorrect) {
        quizCorrect++;
        document.getElementById('quizCorrect').textContent = quizCorrect;
        showFeedback(true, `Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©! (${correctCount}/${correctElements.length})`);
    } else {
        quizWrong++;
        document.getElementById('quizWrong').textContent = quizWrong;
        showFeedback(false, `${correctCount}/${correctElements.length} ØµØ­ÙŠØ­Ø©. Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© Ù…Ø¹Ø±ÙˆØ¶Ø©`);
    }
    
    document.getElementById('quizNextBtn').style.display = 'block';
}

function checkMentionAnswer(userAnswer, keywords, requiredCount) {
    quizAnswered = true;
    
    const normalizedAnswer = userAnswer.toLowerCase().trim();
    const foundKeywords = [];
    
    keywords.forEach(kw => {
        if (normalizedAnswer.includes(kw.toLowerCase())) {
            foundKeywords.push(kw);
        }
    });
    
    const isCorrect = foundKeywords.length >= requiredCount;
    
    if (isCorrect) {
        quizCorrect++;
        document.getElementById('quizCorrect').textContent = quizCorrect;
        showFeedback(true, `ÙˆØ¬Ø¯Ù†Ø§ ${foundKeywords.length} Ø¹Ù†Ø§ØµØ± ØµØ­ÙŠØ­Ø©! (${foundKeywords.join(', ')})`);
    } else {
        quizWrong++;
        document.getElementById('quizWrong').textContent = quizWrong;
        showFeedback(false, `ÙˆØ¬Ø¯Ù†Ø§ ${foundKeywords.length}/${requiredCount} ÙÙ‚Ø·. Ù…Ù† Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©: ${keywords.slice(0, requiredCount).join(', ')}`);
    }
    
    document.getElementById('quizNextBtn').style.display = 'block';
}

function checkDirectQuestionAnswer(userAnswer, keywords, requiredKeywords) {
    quizAnswered = true;
    
    const normalizedAnswer = userAnswer.toLowerCase().trim();
    const foundKeywords = [];
    
    keywords.forEach(kw => {
        if (normalizedAnswer.includes(kw.toLowerCase())) {
            foundKeywords.push(kw);
        }
    });
    
    const isCorrect = foundKeywords.length >= requiredKeywords;
    
    if (isCorrect) {
        quizCorrect++;
        document.getElementById('quizCorrect').textContent = quizCorrect;
        showFeedback(true, `Ø¥Ø¬Ø§Ø¨Ø© Ø¬ÙŠØ¯Ø©! ÙˆØ¬Ø¯Ù†Ø§ ${foundKeywords.length} Ù…ÙØ§Ù‡ÙŠÙ… Ø£Ø³Ø§Ø³ÙŠØ© ØµØ­ÙŠØ­Ø©`);
    } else {
        quizWrong++;
        document.getElementById('quizWrong').textContent = quizWrong;
        showFeedback(false, `Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ØªØ­ØªØ§Ø¬ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„. ÙŠØ¬Ø¨ Ø°ÙƒØ± Ù…ÙØ§Ù‡ÙŠÙ… Ù…Ø«Ù„: ${keywords.slice(0, requiredKeywords).join(', ')}`);
    }
    
    document.getElementById('quizNextBtn').style.display = 'block';
}

function showFeedback(isCorrect, message) {
    const fb = document.getElementById('quizFeedback');
    fb.style.display = 'block';
    
    if (isCorrect) {
        fb.style.background = 'rgba(16,185,129,0.15)';
        fb.style.border = '1px solid rgba(16,185,129,0.3)';
        fb.innerHTML = `<div style="font-size:20px;margin-bottom:5px;">âœ… ${message}</div>`;
    } else {
        fb.style.background = 'rgba(239,68,68,0.15)';
        fb.style.border = '1px solid rgba(239,68,68,0.3)';
        fb.innerHTML = `<div style="font-size:20px;margin-bottom:5px;">âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©</div><div style="font-size:14px;">${message}</div>`;
    }
}

function nextQuizQuestion() {
    quizIndex++;
    const totalQuestions = quizQuestions.length;
    
    if (quizIndex >= totalQuestions) {
        finishQuiz();
    } else {
        loadQuizQuestion();
    }
}

function finishQuiz() {
    const totalQuestions = quizQuestions.length;
    let requiredScore, nextLevel;
    
    if (currentQuizLevel === 'easy') {
        requiredScore = 15;
        nextLevel = 'medium';
    } else if (currentQuizLevel === 'medium') {
        requiredScore = 25;
        nextLevel = 'hard';
    } else if (currentQuizLevel === 'hard') {
        requiredScore = 35;
        nextLevel = null;
    } else {
        requiredScore = Math.ceil(totalQuestions * 0.75);
        nextLevel = null;
    }
    
    const passed = quizCorrect >= requiredScore;
    const overlay = document.getElementById('feedback');
    
    // Save best score
    const savedScore = localStorage.getItem(`quiz_${currentQuizLevel}_best`) || 0;
    if (quizCorrect > savedScore) {
        localStorage.setItem(`quiz_${currentQuizLevel}_best`, quizCorrect);
    }
    
    // Unlock next level if passed
    if (passed && nextLevel) {
        localStorage.setItem(`quiz_${nextLevel}_unlocked`, 'true');
    }
    
    if (passed) {
        const message = nextLevel ? `ØªÙ… ÙØªØ­ ${nextLevel === 'medium' ? 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…ØªÙˆØ³Ø·' : 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹Ø¨'}!` : 'Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª!';
        overlay.innerHTML = `<div class="feedback-card"><div class="feedback-icon">ğŸ‰</div><div class="feedback-title success">Ù†Ø¬Ø­Øª!</div><div class="feedback-msg">Ø£Ø­Ø³Ù†Øª! ${quizCorrect}/${totalQuestions} ØµØ­ÙŠØ­<br>${message}</div><button class="btn btn-primary" onclick="document.getElementById('feedback').classList.remove('active'); navigateTo('knowledgeTests');">Ø¹ÙˆØ¯Ø©</button></div>`;
    } else {
        overlay.innerHTML = `<div class="feedback-card"><div class="feedback-icon">ğŸ˜</div><div class="feedback-title" style="color:var(--danger);">Ù„Ù„Ø£Ø³Ù</div><div class="feedback-msg">ØªØ­ØªØ§Ø¬ ${requiredScore}+ ØµØ­ÙŠØ­. Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${quizCorrect}/${totalQuestions}</div><button class="btn btn-primary" onclick="document.getElementById('feedback').classList.remove('active'); startKnowledgeQuiz('${currentQuizLevel}');">Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</button></div>`;
    }
    
    overlay.classList.add('active');
}

// === GAME: LEVELS ===
function renderLevels() {
    const progress = loadProgress();
    const container = document.getElementById('levelsGrid');
    container.innerHTML = '';
    
    levelsData.forEach((_, index) => {
        const levelNum = index + 1;
        const isUnlocked = levelNum <= progress.unlockedLevels;
        const stars = progress.levelStars[levelNum] || 0;
        
        const card = document.createElement('div');
        card.className = `level-card ${isUnlocked ? '' : 'locked'}`;
        if (isUnlocked) {
            card.onclick = () => startLevel(index);
        }
        
        card.innerHTML = `
            ${!isUnlocked ? '<div class="level-lock">ğŸ”’</div>' : ''}
            <div class="level-number">${levelNum}</div>
            <div class="level-label">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${levelNum}</div>
            ${stars > 0 ? `<div class="level-stars">${'â­'.repeat(stars)}</div>` : ''}
        `;
        
        container.appendChild(card);
    });
}

function startLevel(levelIndex) {
    gameState.currentLevel = levelIndex;
    gameState.currentQuestion = 0;
    gameState.points = 0;
    gameState.startTime = Date.now();
    
    document.getElementById('hudLevel').textContent = levelIndex + 1;
    document.getElementById('hudPoints').textContent = '0';
    
    navigateTo('gameScreen');
    document.getElementById('gameHud').classList.add('active');
    
    loadQuestion();
    startTimer();
}

// === GAME: TIMER ===
let timerInterval;
function startTimer() {
    clearInterval(timerInterval);
    timerInterval = setInterval(() => {
        const elapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
        const mins = Math.floor(elapsed / 60).toString().padStart(2, '0');
        const secs = (elapsed % 60).toString().padStart(2, '0');
        document.getElementById('hudTimer').textContent = `${mins}:${secs}`;
    }, 1000);
}

// === GAME: QUESTION ===
function loadQuestion() {
    const level = levelsData[gameState.currentLevel];
    const q = level[gameState.currentQuestion];
    
    gameState.isChecking = false;
    gameState.selectedLetters = [];
    gameState.hintedPositions = [];
    gameState.currentAnswer = q.answer;
    
    document.getElementById('hudQuestion').textContent = `${gameState.currentQuestion + 1}/10`;
    document.getElementById('clueText').textContent = q.clue;
    
    const lettersOnly = q.answer.replace(/\s/g, '');
    const all = [...lettersOnly.split(''), ...q.extra];
    gameState.availableLetters = shuffle(all).map((l, i) => ({ id: i, letter: l, used: false }));
    
    renderEmptySlots(q.answer);
    renderChoices();
}

function shuffle(arr) {
    const a = [...arr];
    for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
}

function renderEmptySlots(answer) {
    const container = document.getElementById('answerSlots');
    container.innerHTML = '';
    container.classList.remove('correct', 'wrong');
    
    const words = answer.split(' ');
    
    if (words.length > 1) {
        container.style.flexDirection = 'column';
        container.style.gap = '10px';
        
        words.forEach((word) => {
            const row = document.createElement('div');
            row.style.display = 'flex';
            row.style.gap = '6px';
            row.style.justifyContent = 'center';
            row.style.flexWrap = 'nowrap';
            
            for (let i = 0; i < word.length; i++) {
                const slot = document.createElement('div');
                slot.className = 'empty-slot';
                row.appendChild(slot);
            }
            container.appendChild(row);
        });
    } else {
        container.style.flexDirection = 'row';
        container.style.gap = '6px';
        
        for (let i = 0; i < answer.length; i++) {
            const slot = document.createElement('div');
            slot.className = 'empty-slot';
            container.appendChild(slot);
        }
    }
}

function renderChoices() {
    const container = document.getElementById('letterChoices');
    container.innerHTML = '';
    gameState.availableLetters.forEach(item => {
        const btn = document.createElement('button');
        btn.className = 'letter-btn';
        btn.textContent = item.letter;
        btn.disabled = item.used;
        btn.onclick = () => selectLetter(item.id);
        container.appendChild(btn);
    });
}

function selectLetter(id) {
    if (gameState.isChecking) return;
    
    const item = gameState.availableLetters.find(l => l.id === id);
    if (!item || item.used) return;
    
    item.used = true;
    gameState.selectedLetters.push(id);
    
    updateAnswerSlots();
    renderChoices();
}

function updateAnswerSlots() {
    const slots = document.querySelectorAll('.empty-slot');
    const answerNoSpaces = gameState.currentAnswer.replace(/\s/g, '');
    
    slots.forEach((slot, i) => {
        slot.classList.remove('filled');
        slot.textContent = '';
        slot.onclick = null;
        
        if (gameState.hintedPositions.includes(i)) {
            slot.textContent = answerNoSpaces[i];
            slot.classList.add('hint');
        }
    });
    
    gameState.selectedLetters.forEach((id, index) => {
        let availableSlots = Array.from(slots).filter((s, i) => !gameState.hintedPositions.includes(i));
        if (availableSlots[index]) {
            const item = gameState.availableLetters.find(l => l.id === id);
            availableSlots[index].textContent = item.letter;
            availableSlots[index].classList.add('filled');
            availableSlots[index].onclick = () => removeLetter(index);
        }
    });
}

function removeLetter(index) {
    if (gameState.isChecking) return;
    
    const id = gameState.selectedLetters[index];
    const item = gameState.availableLetters.find(l => l.id === id);
    if (!item) return;
    
    item.used = false;
    gameState.selectedLetters.splice(index, 1);
    
    updateAnswerSlots();
    renderChoices();
}

function resetLetters() {
    if (gameState.isChecking) return;
    
    gameState.selectedLetters = [];
    gameState.availableLetters.forEach(l => l.used = false);
    updateAnswerSlots();
    renderChoices();
}

function useHint() {
    if (gameState.isChecking) return;
    
    if (gameState.points <= 0) {
        alert('ØªØ­ØªØ§Ø¬ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ 5 Ù†Ù‚Ø§Ø· Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø³Ø§Ø¹Ø¯Ø©!');
        return;
    }
    
    const answerNoSpaces = gameState.currentAnswer.replace(/\s/g, '');
    const slots = Array.from(document.querySelectorAll('.empty-slot'));
    const unhinted = [];
    
    slots.forEach((slot, i) => {
        if (!gameState.hintedPositions.includes(i)) {
            unhinted.push(i);
        }
    });
    
    if (unhinted.length === 0) return;
    
    const pos = unhinted[0];
    gameState.hintedPositions.push(pos);
    gameState.points -= 5;
    
    document.getElementById('hudPoints').textContent = gameState.points;
    updateAnswerSlots();
    playSound('hint');
}

function skipQuestion() {
    if (gameState.isChecking) return;
    
    gameState.points -= 10;
    document.getElementById('hudPoints').textContent = gameState.points;
    playSound('skip');
    nextQuestion();
}

function checkAnswer() {
    if (gameState.isChecking) return;
    
    let userAnswer = '';
    const slots = document.querySelectorAll('.empty-slot');
    slots.forEach(slot => userAnswer += slot.textContent);
    
    const answerSlots = document.getElementById('answerSlots');
    const correctAnswer = gameState.currentAnswer.replace(/\s/g, '');
    
    if (userAnswer.toUpperCase() === correctAnswer.toUpperCase()) {
        gameState.isChecking = true;
        answerSlots.classList.add('correct');
        gameState.points += 20;
        document.getElementById('hudPoints').textContent = gameState.points;
        
        playSound('success');
        
        setTimeout(() => showFeedback(true), 800);
        
    } else if (userAnswer.length === 0) {
        answerSlots.style.borderColor = 'var(--accent)';
        setTimeout(() => answerSlots.style.borderColor = '', 600);
        
    } else {
        gameState.isChecking = true;
        answerSlots.classList.add('wrong');
        playSound('error');
        
        setTimeout(() => {
            answerSlots.classList.remove('wrong');
            resetLetters();
            gameState.isChecking = false;
        }, 800);
    }
}

function showFeedback(success) {
    const messages = ['Ø±Ø§Ø¦Ø¹ Ø¬Ø¯Ø§Ù‹! ğŸŒŸ', 'Ù…Ù…ØªØ§Ø²! ÙˆØ§ØµÙ„! ğŸš€', 'Ø£Ø­Ø³Ù†Øª! â­', 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! ğŸ’ª'];
    
    const overlay = document.getElementById('feedback');
    overlay.innerHTML = `
        <div class="feedback-card">
            <div class="feedback-icon">âœ…</div>
            <div class="feedback-title success">Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!</div>
            <div class="feedback-msg">${messages[Math.floor(Math.random() * messages.length)]}</div>
            <div class="feedback-points">+20 Ù†Ù‚Ø·Ø© ğŸ…</div>
            <button class="btn btn-primary" onclick="nextQuestion()">Ø§Ù„ØªØ§Ù„ÙŠ â†’</button>
        </div>
    `;
    overlay.classList.add('active');
}

function nextQuestion() {
    document.getElementById('feedback').classList.remove('active');
    
    gameState.currentQuestion++;
    
    if (gameState.currentQuestion >= 10) {
        completeLevel();
    } else {
        loadQuestion();
    }
}

function completeLevel() {
    clearInterval(timerInterval);
    
    const elapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    
    const stars = gameState.points >= 180 ? 3 : gameState.points >= 120 ? 2 : 1;
    
    const progress = loadProgress();
    progress.levelStars[gameState.currentLevel + 1] = Math.max(stars, progress.levelStars[gameState.currentLevel + 1] || 0);
    progress.unlockedLevels = Math.max(progress.unlockedLevels, gameState.currentLevel + 2);
    saveProgress(progress);
    
    const leaderboard = loadLeaderboard();
    leaderboard.push({
        name: gameState.playerName,
        level: gameState.currentLevel + 1,
        points: gameState.points,
        time: elapsed,
        date: Date.now()
    });
    leaderboard.sort((a, b) => b.points - a.points || a.time - b.time);
    saveLeaderboard(leaderboard.slice(0, 50));
    
    const overlay = document.getElementById('feedback');
    overlay.innerHTML = `
        <div class="feedback-card level-complete">
            <div class="feedback-icon">ğŸ†</div>
            <div class="level-complete-title">Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${gameState.currentLevel + 1}!</div>
            <div class="level-stats">
                <div class="stat-row">
                    <span class="stat-label">Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</span>
                    <span class="stat-value">${gameState.points}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø³ØªØºØ±Ù‚</span>
                    <span class="stat-value">${mins}:${secs.toString().padStart(2,'0')}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</span>
                    <span class="stat-value">${'â­'.repeat(stars)}</span>
                </div>
            </div>
            <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
                <button class="btn btn-primary" onclick="backToLevels()">Ø§Ø®ØªØ± Ù…Ø³ØªÙˆÙ‰ Ø¢Ø®Ø±</button>
                <button class="btn btn-ghost" onclick="showLeaderboard()">ğŸ† Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†</button>
            </div>
        </div>
    `;
    overlay.classList.add('active');
}

function backToLevels() {
    document.getElementById('feedback').classList.remove('active');
    navigateTo('levelsScreen');
}

function showLeaderboard() {
    const leaderboard = loadLeaderboard();
    const list = document.getElementById('leaderboardList');
    list.innerHTML = '';
    
    if (leaderboard.length === 0) {
        list.innerHTML = '<div style="text-align:center;padding:40px;color:var(--gray);">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø¨Ø¹Ø¯</div>';
    } else {
        leaderboard.slice(0, 10).forEach((entry, i) => {
            const mins = Math.floor(entry.time / 60);
            const secs = entry.time % 60;
            
            const row = document.createElement('div');
            row.className = 'leaderboard-row';
            row.innerHTML = `
                <div class="leaderboard-rank">${i + 1}</div>
                <div class="leaderboard-name">${entry.name}</div>
                <div class="leaderboard-score">${entry.points}</div>
                <div class="leaderboard-time">${mins}:${secs.toString().padStart(2,'0')}</div>
            `;
            list.appendChild(row);
        });
    }
    
    navigateTo('leaderboardScreen');
}

// === SOUNDS ===
let audioCtx = null;

function getAudioCtx() {
    if (!audioCtx) {
        try { audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }
        catch(e) {}
    }
    return audioCtx;
}

function playSound(type) {
    const ctx = getAudioCtx();
    if (!ctx) return;
    
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();
    osc.connect(gain);
    gain.connect(ctx.destination);
    
    if (type === 'success') {
        osc.frequency.setValueAtTime(523, ctx.currentTime);
        osc.frequency.setValueAtTime(659, ctx.currentTime + 0.1);
        osc.frequency.setValueAtTime(784, ctx.currentTime + 0.2);
        gain.gain.setValueAtTime(0.3, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5);
        osc.start(ctx.currentTime);
        osc.stop(ctx.currentTime + 0.5);
    } else if (type === 'error') {
        osc.frequency.setValueAtTime(200, ctx.currentTime);
        osc.frequency.setValueAtTime(150, ctx.currentTime + 0.2);
        gain.gain.setValueAtTime(0.3, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.4);
        osc.start(ctx.currentTime);
        osc.stop(ctx.currentTime + 0.4);
    } else if (type === 'hint' || type === 'skip') {
        osc.frequency.setValueAtTime(400, ctx.currentTime);
        gain.gain.setValueAtTime(0.2, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.2);
        osc.start(ctx.currentTime);
        osc.stop(ctx.currentTime + 0.2);
    }
}
</script>
</body>
</html>

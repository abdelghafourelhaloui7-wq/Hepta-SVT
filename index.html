<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Hepta-SVT - ŸÖŸÜÿµÿ© ÿ™ÿπŸÑŸäŸÖŸäÿ© ŸÖÿ™ŸÉÿßŸÖŸÑÿ© ŸÑÿ∑ŸÑÿßÿ® ÿπŸÑŸàŸÖ ÿßŸÑÿ≠Ÿäÿßÿ© ŸàÿßŸÑÿ£ÿ±ÿ∂ ŸÖÿπ ÿØÿ±Ÿàÿ≥ÿå ÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™ Ÿàÿ£ŸÑÿπÿßÿ® ÿ™ŸÅÿßÿπŸÑŸäÿ©">
    <meta name="keywords" content="SVT, ÿπŸÑŸàŸÖ ÿßŸÑÿ≠Ÿäÿßÿ©, ÿØÿ±Ÿàÿ≥, ÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™, ÿ™ÿπŸÑŸäŸÖ">
    <meta name="author" content="Hepta-SVT">
    <meta name="theme-color" content="#6366f1">
    <title>Hepta-SVT - ŸÖŸÜÿµÿ© ÿπŸÑŸàŸÖ ÿßŸÑÿ≠Ÿäÿßÿ© ŸàÿßŸÑÿ£ÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿπŸÑŸäÿ©</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #818cf8;
            --secondary: #06b6d4;
            --secondary-dark: #0891b2;
            --accent: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --dark: #0f172a;
            --dark-light: #1e293b;
            --gray: #64748b;
            --light: #f8fafc;
            --white: #ffffff;
            --shadow: rgba(0, 0, 0, 0.1);
            --shadow-lg: rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-main: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --border-radius: 16px;
            --spacing: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', 'Cairo', sans-serif;
            background: var(--dark);
            color: var(--white);
            overflow-x: hidden;
            line-height: 1.6;
            position: relative;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.15;
            pointer-events: none;
        }

        .bg-animation::before,
        .bg-animation::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            filter: blur(100px);
            animation: float 20s infinite ease-in-out;
        }

        .bg-animation::before {
            width: 600px;
            height: 600px;
            background: var(--primary);
            top: -200px;
            right: -200px;
            animation-delay: 0s;
        }

        .bg-animation::after {
            width: 500px;
            height: 500px;
            background: var(--secondary);
            bottom: -150px;
            left: -150px;
            animation-delay: 5s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(50px, -50px) scale(1.1); }
            50% { transform: translate(-30px, 30px) scale(0.9); }
            75% { transform: translate(40px, 40px) scale(1.05); }
        }

        /* Navbar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 70px;
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--spacing);
            z-index: 1000;
            transition: var(--transition);
        }

        .navbar.scrolled {
            height: 60px;
            background: rgba(15, 23, 42, 0.95);
            box-shadow: 0 4px 20px var(--shadow-lg);
        }

        .navbar-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .menu-btn {
            width: 45px;
            height: 45px;
            background: var(--gradient-main);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .menu-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(102, 102, 241, 0.4);
        }

        .menu-btn:active {
            transform: scale(0.95);
        }

        .menu-btn span {
            font-size: 24px;
            color: var(--white);
            transition: var(--transition);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            width: 45px;
            height: 45px;
            background: var(--gradient-main);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 700;
            color: var(--white);
            box-shadow: 0 4px 15px rgba(102, 102, 241, 0.3);
        }

        .logo-text {
            font-size: 22px;
            font-weight: 700;
            background: var(--gradient-main);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .navbar-actions {
            display: flex;
            gap: 10px;
        }

        .search-btn,
        .notify-btn {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            color: var(--white);
            font-size: 18px;
        }

        .search-btn:hover,
        .notify-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(1.05);
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 0;
            right: -320px;
            width: 320px;
            height: 100vh;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(30px) saturate(180%);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            padding: 90px 20px 20px;
            transition: var(--transition);
            z-index: 999;
            overflow-y: auto;
            box-shadow: -10px 0 50px rgba(0, 0, 0, 0.3);
        }

        .sidebar.active {
            right: 0;
        }

        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 998;
        }

        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .sidebar-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-avatar {
            width: 90px;
            height: 90px;
            background: var(--gradient-main);
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: 700;
            color: var(--white);
            box-shadow: 0 8px 30px rgba(102, 102, 241, 0.4);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .sidebar-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .sidebar-subtitle {
            font-size: 14px;
            color: var(--gray);
        }

        .sidebar-menu {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .sidebar-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px 18px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
        }

        .sidebar-item::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 0;
            height: 100%;
            background: var(--gradient-main);
            transition: var(--transition);
            z-index: -1;
        }

        .sidebar-item:hover::before {
            width: 100%;
        }

        .sidebar-item:hover {
            border-color: transparent;
            transform: translateX(-5px);
            box-shadow: 0 8px 25px rgba(102, 102, 241, 0.3);
        }

        .sidebar-item.active {
            background: var(--gradient-main);
            border-color: transparent;
            box-shadow: 0 8px 25px rgba(102, 102, 241, 0.4);
        }

        .sidebar-item-icon {
            font-size: 22px;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }

        .sidebar-item-text {
            font-size: 16px;
            font-weight: 600;
        }

        /* Main Content */
        .main {
            margin-top: 70px;
            padding: 30px var(--spacing);
            position: relative;
            z-index: 1;
            min-height: calc(100vh - 70px);
        }

        .page {
            display: none;
            animation: fadeInUp 0.5s ease-out;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Dashboard */
        .hero {
            background: var(--gradient-main);
            border-radius: var(--border-radius);
            padding: 50px 40px;
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(102, 102, 241, 0.3);
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(255, 255, 255, 0.03) 10px,
                rgba(255, 255, 255, 0.03) 20px
            );
            animation: slide 20s linear infinite;
        }

        @keyframes slide {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-title {
            font-size: 42px;
            font-weight: 800;
            margin-bottom: 15px;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        .hero-subtitle {
            font-size: 18px;
            opacity: 0.95;
            margin-bottom: 25px;
        }

        .hero-btn {
            background: var(--white);
            color: var(--primary);
            border: none;
            padding: 15px 35px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .hero-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            transition: var(--transition);
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-5px);
            box-shadow: 0 15px 40px var(--shadow-lg);
        }

        .stat-icon {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary-light);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--gray);
        }

        /* Section Header */
        .section-header {
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .section-title {
            font-size: 28px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-main);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 20px;
        }

        .breadcrumb-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .breadcrumb-item:hover {
            color: var(--primary-light);
        }

        .breadcrumb-separator {
            opacity: 0.5;
        }

        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            padding: 30px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-main);
            transform: scaleX(0);
            transform-origin: right;
            transition: var(--transition);
        }

        .card:hover::before {
            transform: scaleX(1);
        }

        .card:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-8px);
            box-shadow: 0 20px 50px var(--shadow-lg);
            border-color: rgba(102, 102, 241, 0.3);
        }

        .card-icon {
            width: 60px;
            height: 60px;
            background: var(--gradient-main);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(102, 102, 241, 0.3);
        }

        .card-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .card-description {
            font-size: 14px;
            color: var(--gray);
            line-height: 1.6;
        }

        .card-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--accent);
            color: var(--white);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        /* Popup */
        .popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            padding: 20px;
            animation: fadeIn 0.3s ease-out;
        }

        .popup.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .popup-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            animation: zoomIn 0.3s ease-out;
        }

        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .popup-img {
            max-width: 100%;
            max-height: 85vh;
            border-radius: var(--border-radius);
            box-shadow: 0 25px 100px rgba(0, 0, 0, 0.5);
        }

        .popup-close {
            position: absolute;
            top: -50px;
            left: -50px;
            width: 50px;
            height: 50px;
            background: var(--white);
            color: var(--dark);
            border: none;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .popup-close:hover {
            background: var(--danger);
            color: var(--white);
            transform: rotate(90deg) scale(1.1);
        }

        .popup-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.2);
            border-top-color: var(--white);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .popup-error {
            text-align: center;
            padding: 40px;
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid var(--danger);
            border-radius: var(--border-radius);
        }

        .popup-error-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 60px 20px;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255, 255, 255, 0.2);
            border-top-color: var(--primary);
            border-radius: 50%;
            margin: 0 auto 20px;
            animation: spin 0.8s linear infinite;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
        }

        .empty-icon {
            font-size: 80px;
            opacity: 0.3;
            margin-bottom: 20px;
        }

        .empty-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .empty-description {
            font-size: 16px;
            color: var(--gray);
        }

        /* Back Button */
        .back-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            transition: var(--transition);
            margin-bottom: 20px;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .navbar {
                padding: 0 15px;
            }

            .logo-text {
                font-size: 18px;
            }

            .main {
                padding: 20px 15px;
            }

            .hero {
                padding: 35px 25px;
            }

            .hero-title {
                font-size: 32px;
            }

            .hero-subtitle {
                font-size: 16px;
            }

            .section-title {
                font-size: 24px;
            }

            .cards-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .sidebar {
                width: 280px;
                right: -280px;
            }

            .popup-close {
                top: -45px;
                left: -45px;
                width: 45px;
                height: 45px;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 26px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .card {
                padding: 20px;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--dark-light);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Game Styles */
        .game-hud {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .game-hud-item {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: var(--transition);
        }

        .game-hud-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
        }

        .game-hud-label {
            font-size: 11px;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .game-hud-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary-light);
        }

        .game-points {
            color: var(--accent);
        }

        .game-progress-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            height: 8px;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .game-progress-fill {
            height: 100%;
            background: var(--gradient-main);
            border-radius: 10px;
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            width: 0%;
        }

        .game-question-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            padding: 35px;
            margin-bottom: 25px;
        }

        .game-clue-box {
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
        }

        .game-clue-label {
            font-size: 12px;
            color: var(--secondary);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .game-clue-text {
            font-size: 24px;
            font-weight: 700;
            color: var(--white);
        }

        .game-answer-section {
            margin-bottom: 30px;
        }

        .game-answer-label {
            font-size: 13px;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            font-weight: 600;
            text-align: center;
        }

        .game-answer-slots {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            min-height: 70px;
            background: rgba(0, 0, 0, 0.2);
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 15px;
            transition: var(--transition);
        }

        .game-answer-slots.correct {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.1);
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.3);
        }

        .game-answer-slots.wrong {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.1);
            animation: shake 0.5s ease-out;
        }

        .game-letter-slot {
            width: 52px;
            height: 58px;
            background: rgba(99, 102, 241, 0.15);
            border: 2px solid rgba(99, 102, 241, 0.3);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 900;
            cursor: pointer;
            transition: var(--transition);
            color: var(--primary-light);
            text-transform: uppercase;
            animation: popIn 0.3s ease-out;
        }

        @keyframes popIn {
            from {
                transform: scale(0);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .game-letter-slot:hover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.25);
            transform: translateY(-3px);
        }

        .game-letter-slot.correct-letter {
            background: rgba(16, 185, 129, 0.2);
            border-color: var(--success);
            color: var(--success);
        }

        .game-choices-section {
            margin-bottom: 25px;
        }

        .game-choices-label {
            font-size: 13px;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            font-weight: 600;
            text-align: center;
        }

        .game-letter-choices {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-height: 80px;
        }

        .game-letter-btn {
            width: 55px;
            height: 60px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(99, 102, 241, 0.4);
            border-radius: 12px;
            color: var(--white);
            font-size: 24px;
            font-weight: 900;
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
        }

        .game-letter-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--gradient-main);
            opacity: 0;
            transition: opacity 0.2s;
        }

        .game-letter-btn span {
            position: relative;
            z-index: 1;
        }

        .game-letter-btn:hover:not(:disabled) {
            border-color: var(--primary);
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 10px 25px rgba(99, 102, 241, 0.3);
        }

        .game-letter-btn:hover:not(:disabled)::before {
            opacity: 0.3;
        }

        .game-letter-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: none !important;
        }

        .game-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .game-btn {
            padding: 14px 30px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            border: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .game-btn-primary {
            background: var(--gradient-main);
            color: var(--white);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
        }

        .game-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(99, 102, 241, 0.4);
        }

        .game-btn-ghost {
            background: transparent;
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: var(--gray);
        }

        .game-btn-ghost:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .game-feedback {
            position: fixed;
            inset: 0;
            z-index: 3000;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .game-feedback.active {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .game-feedback-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 50px 60px;
            text-align: center;
            animation: bounceIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            max-width: 420px;
            width: 90%;
        }

        @keyframes bounceIn {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }
            70% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .game-feedback-icon {
            font-size: 80px;
            margin-bottom: 20px;
            display: block;
        }

        .game-feedback-title {
            font-size: 32px;
            font-weight: 900;
            margin-bottom: 10px;
        }

        .game-feedback-title.success {
            color: var(--success);
        }

        .game-feedback-title.error {
            color: var(--danger);
        }

        .game-feedback-msg {
            font-size: 16px;
            color: var(--gray);
            margin-bottom: 25px;
        }

        .game-feedback-points {
            background: rgba(245, 158, 11, 0.15);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 12px;
            padding: 12px 20px;
            font-size: 18px;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 25px;
            display: inline-block;
        }

        .float-points {
            position: fixed;
            font-size: 32px;
            font-weight: 900;
            color: var(--accent);
            pointer-events: none;
            z-index: 4000;
            animation: floatUp 1.5s ease-out forwards;
        }

        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) scale(1.5);
            }
        }

        /* Focus Styles */
        button:focus,
        .sidebar-item:focus,
        .card:focus {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }

        /* ===== GAME STYLES ===== */
        .game-hud {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .game-hud-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .game-hud-item::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            width: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .game-hud-label {
            font-size: 11px;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .game-hud-value {
            font-size: 32px;
            font-weight: 800;
            color: var(--primary-light);
        }

        .game-hud-value.game-points {
            color: var(--accent);
        }

        .game-progress-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            height: 8px;
            margin-bottom: 25px;
            overflow: hidden;
            position: relative;
        }

        .game-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 10px;
            width: 0%;
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .game-question-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        .game-question-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
        }

        .game-clue-box {
            background: rgba(6, 182, 212, 0.08);
            border: 1px solid rgba(6, 182, 212, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
        }

        .game-clue-label {
            font-size: 12px;
            color: var(--secondary);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .game-clue-text {
            font-size: 24px;
            font-weight: 700;
            color: var(--white);
        }

        .game-answer-section {
            margin-bottom: 30px;
        }

        .game-answer-label {
            font-size: 12px;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            font-weight: 600;
            text-align: center;
        }

        .game-answer-slots {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            min-height: 80px;
            background: rgba(0, 0, 0, 0.2);
            border: 2px dashed rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
        }

        .game-answer-slots.correct {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.1);
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.3);
            animation: successPulse 0.6s ease-out;
        }

        @keyframes successPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .game-answer-slots.wrong {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.1);
            animation: wrongShake 0.5s ease-out;
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-8px); }
            80% { transform: translateX(8px); }
        }

        .game-letter-slot {
            width: 55px;
            height: 62px;
            background: rgba(99, 102, 241, 0.15);
            border: 2px solid rgba(99, 102, 241, 0.4);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 900;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            color: var(--primary-light);
            text-transform: uppercase;
            animation: letterPop 0.3s ease-out;
        }

        @keyframes letterPop {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .game-letter-slot:hover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.25);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);
        }

        .game-letter-slot.correct-letter {
            background: rgba(16, 185, 129, 0.2);
            border-color: var(--success);
            color: var(--success);
            animation: correctFlash 0.6s ease-out;
        }

        @keyframes correctFlash {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        .game-choices-section {
            margin-bottom: 30px;
        }

        .game-choices-label {
            font-size: 12px;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            font-weight: 600;
            text-align: center;
        }

        .game-letter-choices {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            padding: 25px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            min-height: 100px;
        }

        .game-letter-btn {
            width: 58px;
            height: 64px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(99, 102, 241, 0.25));
            border: 2px solid rgba(99, 102, 241, 0.4);
            border-radius: 12px;
            color: var(--white);
            font-size: 26px;
            font-weight: 900;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
        }

        .game-letter-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: opacity 0.2s;
        }

        .game-letter-btn span {
            position: relative;
            z-index: 1;
        }

        .game-letter-btn:hover:not(:disabled) {
            border-color: var(--primary-light);
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 10px 25px rgba(99, 102, 241, 0.4);
        }

        .game-letter-btn:hover:not(:disabled)::before {
            opacity: 0.3;
        }

        .game-letter-btn:active:not(:disabled) {
            transform: scale(0.95);
        }

        .game-letter-btn:disabled {
            opacity: 0.2;
            cursor: not-allowed;
            transform: none !important;
        }

        .game-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .game-btn {
            padding: 15px 35px;
            border-radius: 12px;
            font-family: 'Cairo', sans-serif;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .game-btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
        }

        .game-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(99, 102, 241, 0.4);
        }

        .game-btn-ghost {
            background: transparent;
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: var(--gray);
        }

        .game-btn-ghost:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .game-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Game Feedback Modal */
        .game-feedback {
            position: fixed;
            inset: 0;
            z-index: 3000;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .game-feedback.show {
            opacity: 1;
            visibility: visible;
        }

        .game-feedback-card {
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 50px 60px;
            text-align: center;
            animation: feedbackBounce 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            max-width: 450px;
            width: 90%;
        }

        @keyframes feedbackBounce {
            0% { transform: scale(0.5); opacity: 0; }
            70% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }

        .game-feedback-icon {
            font-size: 90px;
            margin-bottom: 25px;
            display: block;
            animation: iconPulse 0.6s ease-out;
        }

        @keyframes iconPulse {
            0% { transform: scale(0); }
            60% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .game-feedback-title {
            font-size: 36px;
            font-weight: 900;
            margin-bottom: 15px;
        }

        .game-feedback-title.success {
            color: var(--success);
            text-shadow: 0 0 20px rgba(16, 185, 129, 0.4);
        }

        .game-feedback-title.error {
            color: var(--danger);
            text-shadow: 0 0 20px rgba(239, 68, 68, 0.4);
        }

        .game-feedback-msg {
            font-size: 16px;
            color: var(--gray);
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .game-feedback-points {
            background: rgba(245, 158, 11, 0.15);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 12px;
            padding: 12px 25px;
            font-size: 20px;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 30px;
            display: inline-block;
        }

        .game-particles {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 2999;
        }

        .game-particle {
            position: absolute;
            border-radius: 50%;
            animation: particleFly 1.5s ease-out forwards;
        }

        @keyframes particleFly {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
        }

        @media (max-width: 768px) {
            .game-question-card { padding: 25px; }
            .game-letter-slot { width: 45px; height: 52px; font-size: 20px; }
            .game-letter-btn { width: 48px; height: 54px; font-size: 22px; }
            .game-hud-value { font-size: 26px; }
            .game-clue-text { font-size: 20px; }
            .game-feedback-card { padding: 35px 25px; }
        }
    </style>
</head>

<body>
    <!-- Animated Background -->
    <div class="bg-animation"></div>

    <!-- Navbar -->
    <nav class="navbar" role="navigation" aria-label="ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©">
        <div class="navbar-right">
            <button class="menu-btn" id="menuBtn" aria-label="ŸÅÿ™ÿ≠ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©" aria-expanded="false">
                <span>‚ò∞</span>
            </button>
            <div class="logo-container">
                <div class="logo" aria-hidden="true">H</div>
                <h1 class="logo-text">Hepta-SVT</h1>
            </div>
        </div>
        <div class="navbar-actions">
            <button class="search-btn" aria-label="ÿ®ÿ≠ÿ´" title="ÿ®ÿ≠ÿ´">
                üîç
            </button>
            <button class="notify-btn" aria-label="ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™" title="ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™">
                üîî
            </button>
        </div>
    </nav>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar" role="complementary" aria-label="ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ¨ÿßŸÜÿ®Ÿäÿ©">
        <div class="sidebar-header">
            <div class="sidebar-avatar" aria-hidden="true">H</div>
            <h2 class="sidebar-title">Hepta-SVT</h2>
            <p class="sidebar-subtitle">ŸÖŸÜÿµÿ© ÿπŸÑŸàŸÖ ÿßŸÑÿ≠Ÿäÿßÿ© ŸàÿßŸÑÿ£ÿ±ÿ∂</p>
        </div>
        <nav class="sidebar-menu" role="navigation" aria-label="ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©">
            <div class="sidebar-item active" data-page="dashboard" role="button" tabindex="0" aria-label="ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©">
                <div class="sidebar-item-icon" aria-hidden="true">üè†</div>
                <div class="sidebar-item-text">ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</div>
            </div>
            <div class="sidebar-item" data-page="lessons" role="button" tabindex="0" aria-label="ÿßŸÑÿØÿ±Ÿàÿ≥">
                <div class="sidebar-item-icon" aria-hidden="true">üìö</div>
                <div class="sidebar-item-text">ÿßŸÑÿØÿ±Ÿàÿ≥</div>
            </div>
            <div class="sidebar-item" data-page="tests" role="button" tabindex="0" aria-label="ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™">
                <div class="sidebar-item-icon" aria-hidden="true">‚úçÔ∏è</div>
                <div class="sidebar-item-text">ÿßÿÆÿ™ÿ®ÿ± ŸÜŸÅÿ≥ŸÉ</div>
            </div>
            <div class="sidebar-item" data-page="exercises" role="button" tabindex="0" aria-label="ÿ≥ŸÑÿßÿ≥ŸÑ ÿßŸÑÿ™ŸÖÿßÿ±ŸäŸÜ">
                <div class="sidebar-item-icon" aria-hidden="true">üìù</div>
                <div class="sidebar-item-text">ÿ≥ŸÑÿßÿ≥ŸÑ ÿßŸÑÿ™ŸÖÿßÿ±ŸäŸÜ</div>
            </div>
            <div class="sidebar-item" data-page="videos" role="button" tabindex="0" aria-label="ŸÅŸäÿØŸäŸàŸáÿßÿ™ ÿ™ÿπŸÑŸäŸÖŸäÿ©">
                <div class="sidebar-item-icon" aria-hidden="true">üé•</div>
                <div class="sidebar-item-text">ŸÅŸäÿØŸäŸàŸáÿßÿ™ ÿ™ÿπŸÑŸäŸÖŸäÿ©</div>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main" role="main">
        <!-- Dashboard Page -->
        <section id="dashboard" class="page active">
            <div class="hero">
                <div class="hero-content">
                    <h2 class="hero-title">ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä Hepta-SVT üåü</h2>
                    <p class="hero-subtitle">ŸÖŸÜÿµÿ™ŸÉ ÿßŸÑÿ™ÿπŸÑŸäŸÖŸäÿ© ÿßŸÑŸÖÿ™ŸÉÿßŸÖŸÑÿ© ŸÑÿπŸÑŸàŸÖ ÿßŸÑÿ≠Ÿäÿßÿ© ŸàÿßŸÑÿ£ÿ±ÿ∂</p>
                    <button class="hero-btn" onclick="navigateTo('lessons')">
                        <span>ÿßÿ®ÿØÿ£ ÿßŸÑÿ™ÿπŸÑŸÖ</span>
                        <span>‚Üí</span>
                    </button>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìö</div>
                    <div class="stat-value">6</div>
                    <div class="stat-label">ÿØÿ±Ÿàÿ≥ ŸÖÿ™ÿßÿ≠ÿ©</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úçÔ∏è</div>
                    <div class="stat-value">12</div>
                    <div class="stat-label">ÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üéÆ</div>
                    <div class="stat-value">8</div>
                    <div class="stat-label">ÿ£ŸÑÿπÿßÿ® ÿ™ŸÅÿßÿπŸÑŸäÿ©</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üé•</div>
                    <div class="stat-value">ŸÇÿ±Ÿäÿ®ÿßŸã</div>
                    <div class="stat-label">ŸÅŸäÿØŸäŸàŸáÿßÿ™</div>
                </div>
            </div>

            <div class="section-header">
                <h3 class="section-title">
                    <span class="section-icon">üî•</span>
                    ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ¥ŸäŸàÿπÿßŸã
                </h3>
            </div>

            <div class="cards-grid">
                <div class="card" onclick="navigateTo('lessons')" tabindex="0" role="button">
                    <div class="card-icon">üß†</div>
                    <h4 class="card-title">Le syst√®me nerveux</h4>
                    <p class="card-description">ÿ™ÿπÿ±ŸÅ ÿπŸÑŸâ ÿ™ŸÜÿ∏ŸäŸÖ ŸàŸàÿ∏ÿßÿ¶ŸÅ ÿßŸÑÿ¨Ÿáÿßÿ≤ ÿßŸÑÿπÿµÿ®Ÿä</p>
                </div>
                <div class="card" onclick="navigateTo('lessons')" tabindex="0" role="button">
                    <div class="card-icon">üí™</div>
                    <h4 class="card-title">Le syst√®me musculaire</h4>
                    <p class="card-description">ÿßŸÉÿ™ÿ¥ŸÅ ŸÉŸäŸÅ ÿ™ÿπŸÖŸÑ ÿßŸÑÿπÿ∂ŸÑÿßÿ™ ŸÅŸä ÿ¨ÿ≥ŸÖ ÿßŸÑÿ•ŸÜÿ≥ÿßŸÜ</p>
                </div>
                <div class="card" onclick="navigateTo('lessons')" tabindex="0" role="button">
                    <div class="card-icon">üõ°Ô∏è</div>
                    <h4 class="card-title">Le syst√®me immunitaire</h4>
                    <p class="card-description">ÿ™ÿπŸÑŸÖ ŸÉŸäŸÅ Ÿäÿ≠ŸÖŸä ÿ¨ÿ≥ŸÖŸÉ ŸÜŸÅÿ≥Ÿá ŸÖŸÜ ÿßŸÑÿ£ŸÖÿ±ÿßÿ∂</p>
                </div>
            </div>
        </section>

        <!-- Lessons Page -->
        <section id="lessons" class="page">
            <div class="breadcrumb">
                <span class="breadcrumb-item" onclick="navigateTo('dashboard')">
                    <span>üè†</span>
                    <span>ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span>
                </span>
                <span class="breadcrumb-separator">‚Üê</span>
                <span class="breadcrumb-item">ÿßŸÑÿØÿ±Ÿàÿ≥</span>
            </div>

            <div class="section-header">
                <h2 class="section-title">
                    <span class="section-icon">üìö</span>
                    ÿßŸÑÿØÿ±Ÿàÿ≥ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©
                </h2>
            </div>

            <div class="cards-grid">
                <div class="card" onclick="openLesson('nervous')" tabindex="0" role="button">
                    <div class="card-badge">ÿ¨ÿØŸäÿØ</div>
                    <div class="card-icon">üß†</div>
                    <h3 class="card-title">Le syst√®me nerveux</h3>
                    <p class="card-description">ÿØÿ±ÿßÿ≥ÿ© ÿ¥ÿßŸÖŸÑÿ© ŸÑŸÑÿ¨Ÿáÿßÿ≤ ÿßŸÑÿπÿµÿ®Ÿä ŸàÿßŸÑÿ•ÿ≠ÿ≥ÿßÿ≥ ÿßŸÑŸàÿßÿπŸä ŸàÿßŸÑÿ≠ÿ±ŸÉÿßÿ™ ÿßŸÑÿ•ÿ±ÿßÿØŸäÿ©</p>
                </div>
                <div class="card" onclick="openLesson('muscular')" tabindex="0" role="button">
                    <div class="card-icon">üí™</div>
                    <h3 class="card-title">Le syst√®me musculaire</h3>
                    <p class="card-description">ÿ™ÿπÿ±ŸÅ ÿπŸÑŸâ ÿØŸàÿ± ÿßŸÑÿπÿ∂ŸÑÿßÿ™ÿå ÿ®ŸÜŸäÿ™Ÿáÿß Ÿàÿßÿ≠ÿ™Ÿäÿßÿ¨ÿßÿ™Ÿáÿß</p>
                </div>
                <div class="card" onclick="showImage('microbes.jpg', 'Les microbes')" tabindex="0" role="button">
                    <div class="card-icon">ü¶†</div>
                    <h3 class="card-title">Les microbes</h3>
                    <p class="card-description">ÿßÿ≥ÿ™ŸÉÿ¥ŸÅ ÿπÿßŸÑŸÖ ÿßŸÑŸÉÿßÿ¶ŸÜÿßÿ™ ÿßŸÑÿØŸÇŸäŸÇÿ© Ÿàÿ£ŸÜŸàÿßÿπŸáÿß</p>
                </div>
                <div class="card" onclick="openLesson('immune')" tabindex="0" role="button">
                    <div class="card-icon">üõ°Ô∏è</div>
                    <h3 class="card-title">Le syst√®me immunitaire</h3>
                    <p class="card-description">ÿßŸÑŸÖŸÜÿßÿπÿ© ÿßŸÑÿ∑ÿ®ŸäÿπŸäÿ© ŸàÿßŸÑŸÖŸÉÿ™ÿ≥ÿ®ÿ© ŸàÿßŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑŸÑŸÖŸÅÿßŸàŸäÿ©</p>
                </div>
                <div class="card" onclick="openLesson('dysfunction')" tabindex="0" role="button">
                    <div class="card-icon">üî¥</div>
                    <h3 class="card-title">Dysfonctionnements immunitaires</h3>
                    <p class="card-description">ÿØÿ±ÿßÿ≥ÿ© ÿßŸÑÿ≠ÿ≥ÿßÿ≥Ÿäÿ© ŸàÿßŸÑÿ•ŸäÿØÿ≤ ŸàÿßŸÑÿ£ŸÖÿ±ÿßÿ∂ ÿßŸÑŸÖŸÜÿßÿπŸäÿ©</p>
                </div>
                <div class="card" onclick="showImage('transfusion.jpg', 'La transfusion sanguine')" tabindex="0" role="button">
                    <div class="card-icon">üíâ</div>
                    <h3 class="card-title">La transfusion sanguine</h3>
                    <p class="card-description">ÿ™ÿπŸÑŸÖ ÿπŸÜ ŸÅÿµÿßÿ¶ŸÑ ÿßŸÑÿØŸÖ ŸàÿπŸÖŸÑŸäÿ© ŸÜŸÇŸÑ ÿßŸÑÿØŸÖ</p>
                </div>
            </div>
        </section>

        <!-- Lesson Details Page -->
        <section id="lessonDetails" class="page">
            <button class="back-btn" onclick="navigateTo('lessons')">
                <span>‚Üí</span>
                <span>ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿØÿ±Ÿàÿ≥</span>
            </button>

            <div class="breadcrumb">
                <span class="breadcrumb-item" onclick="navigateTo('dashboard')">
                    <span>üè†</span>
                    <span>ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span>
                </span>
                <span class="breadcrumb-separator">‚Üê</span>
                <span class="breadcrumb-item" onclick="navigateTo('lessons')">ÿßŸÑÿØÿ±Ÿàÿ≥</span>
                <span class="breadcrumb-separator">‚Üê</span>
                <span class="breadcrumb-item" id="currentLessonBreadcrumb"></span>
            </div>

            <div class="section-header">
                <h2 class="section-title" id="lessonTitle">
                    <span class="section-icon" id="lessonIcon">üìñ</span>
                    <span id="lessonTitleText"></span>
                </h2>
            </div>

            <div class="cards-grid" id="lessonParagraphs"></div>
        </section>

        <!-- Tests Page -->
        <section id="tests" class="page">
            <div class="breadcrumb">
                <span class="breadcrumb-item" onclick="navigateTo('dashboard')">
                    <span>üè†</span>
                    <span>ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span>
                </span>
                <span class="breadcrumb-separator">‚Üê</span>
                <span class="breadcrumb-item">ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™</span>
            </div>

            <div class="section-header">
                <h2 class="section-title">
                    <span class="section-icon">‚úçÔ∏è</span>
                    ÿßÿÆÿ™ÿ®ÿ± ŸÖÿπŸÑŸàŸÖÿßÿ™ŸÉ
                </h2>
            </div>

            <div class="cards-grid">
                <div class="card" tabindex="0" role="button">
                    <div class="card-badge">ŸÇÿ±Ÿäÿ®ÿßŸã</div>
                    <div class="card-icon">üìù</div>
                    <h3 class="card-title">ÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿπÿ±ŸÅÿ©</h3>
                    <p class="card-description">ŸÇŸäŸëŸÖ ŸÖÿπÿ±ŸÅÿ™ŸÉ ÿßŸÑŸÜÿ∏ÿ±Ÿäÿ© ÿ®ÿßŸÑŸÖŸÅÿßŸáŸäŸÖ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©</p>
                </div>
                <div class="card" tabindex="0" role="button">
                    <div class="card-badge">ŸÇÿ±Ÿäÿ®ÿßŸã</div>
                    <div class="card-icon">üéØ</div>
                    <h3 class="card-title">ÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™ ÿßŸÑŸÖŸáÿßÿ±ÿßÿ™</h3>
                    <p class="card-description">ÿßÿÆÿ™ÿ®ÿ± ŸÇÿØÿ±ÿ™ŸÉ ÿπŸÑŸâ ÿ™ÿ∑ÿ®ŸäŸÇ ŸÖÿß ÿ™ÿπŸÑŸÖÿ™Ÿá</p>
                </div>
                <div class="card" onclick="navigateTo('wordScramble')" tabindex="0" role="button">
                    <div class="card-icon">üéÆ</div>
                    <h3 class="card-title">ÿ£ŸÑÿπÿßÿ® ÿ™ÿ±ÿ®ŸàŸäÿ©</h3>
                    <p class="card-description">ÿ™ÿπŸÑŸÖ Ÿàÿ™ÿ≥ŸÑŸâ ŸÅŸä ŸÜŸÅÿ≥ ÿßŸÑŸàŸÇÿ™ ŸÖŸÜ ÿÆŸÑÿßŸÑ ÿ£ŸÑÿπÿßÿ® ÿ™ŸÅÿßÿπŸÑŸäÿ©</p>
                </div>
            </div>
        </section>

        <!-- Games Page -->
        <section id="games" class="page">
            <div class="breadcrumb">
                <span class="breadcrumb-item" onclick="navigateTo('dashboard')">
                    <span>üè†</span>
                    <span>ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span>
                </span>
                <span class="breadcrumb-separator">‚Üê</span>
                <span class="breadcrumb-item">ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑÿ™ÿπŸÑŸäŸÖŸäÿ©</span>
            </div>

            <div class="section-header">
                <h2 class="section-title">
                    <span class="section-icon">üéÆ</span>
                    ÿ£ŸÑÿπÿßÿ® ÿ™ÿπŸÑŸäŸÖŸäÿ© ÿ™ŸÅÿßÿπŸÑŸäÿ©
                </h2>
            </div>

            <div class="cards-grid">
                <div class="card" tabindex="0" role="button">
                    <div class="card-badge">ŸÇÿ±Ÿäÿ®ÿßŸã</div>
                    <div class="card-icon">üß©</div>
                    <h3 class="card-title">ÿßŸÑŸÉŸÑŸÖÿßÿ™ ÿßŸÑŸÖÿ™ŸÇÿßÿ∑ÿπÿ©</h3>
                    <p class="card-description">ÿ≠ŸÑ ÿßŸÑÿ£ŸÑÿ∫ÿßÿ≤ Ÿàÿ™ÿπŸÑŸÖ ÿßŸÑŸÖÿµÿ∑ŸÑÿ≠ÿßÿ™ ÿßŸÑÿπŸÑŸÖŸäÿ©</p>
                </div>
                <div class="card" tabindex="0" role="button">
                    <div class="card-badge">ŸÇÿ±Ÿäÿ®ÿßŸã</div>
                    <div class="card-icon">üé≤</div>
                    <h3 class="card-title">ÿßŸÑŸÖÿ∑ÿßÿ®ŸÇÿ©</h3>
                    <p class="card-description">ÿ∑ÿßÿ®ŸÇ ÿßŸÑŸÖŸÅÿßŸáŸäŸÖ ŸÖÿπ ÿ™ÿπÿ±ŸäŸÅÿßÿ™Ÿáÿß</p>
                </div>
                <div class="card" tabindex="0" role="button">
                    <div class="card-badge">ŸÇÿ±Ÿäÿ®ÿßŸã</div>
                    <div class="card-icon">üèÜ</div>
                    <h3 class="card-title">ÿßŸÑÿ™ÿ≠ÿØŸä ÿßŸÑÿπŸÑŸÖŸä</h3>
                    <p class="card-description">ÿ™ŸÜÿßŸÅÿ≥ ŸÖÿπ ÿ£ÿµÿØŸÇÿßÿ¶ŸÉ ŸÅŸä ÿßŸÑŸÖÿπÿ±ŸÅÿ©</p>
                </div>
            </div>
        </section>

        <!-- Exercises Page -->
        <section id="exercises" class="page">
            <div class="breadcrumb">
                <span class="breadcrumb-item" onclick="navigateTo('dashboard')">
                    <span>üè†</span>
                    <span>ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span>
                </span>
                <span class="breadcrumb-separator">‚Üê</span>
                <span class="breadcrumb-item">ÿ≥ŸÑÿßÿ≥ŸÑ ÿßŸÑÿ™ŸÖÿßÿ±ŸäŸÜ</span>
            </div>

            <div class="section-header">
                <h2 class="section-title">
                    <span class="section-icon">üìù</span>
                    ÿ≥ŸÑÿßÿ≥ŸÑ ÿßŸÑÿ™ŸÖÿßÿ±ŸäŸÜ
                </h2>
            </div>

            <div class="empty-state">
                <div class="empty-icon">üìù</div>
                <h3 class="empty-title">ŸÇÿ±Ÿäÿ®ÿßŸã ÿ¨ÿØÿßŸã!</h3>
                <p class="empty-description">ŸÜÿπŸÖŸÑ ÿπŸÑŸâ ÿ•ÿ∂ÿßŸÅÿ© ÿ≥ŸÑÿßÿ≥ŸÑ ÿ™ŸÖÿßÿ±ŸäŸÜ ÿ¥ÿßŸÖŸÑÿ© ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑÿØÿ±Ÿàÿ≥</p>
            </div>
        </section>

        <!-- Videos Page -->
        <section id="videos" class="page">
            <div class="breadcrumb">
                <span class="breadcrumb-item" onclick="navigateTo('dashboard')">
                    <span>üè†</span>
                    <span>ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span>
                </span>
                <span class="breadcrumb-separator">‚Üê</span>
                <span class="breadcrumb-item">ÿßŸÑŸÅŸäÿØŸäŸàŸáÿßÿ™</span>
            </div>

            <div class="section-header">
                <h2 class="section-title">
                    <span class="section-icon">üé•</span>
                    ŸÅŸäÿØŸäŸàŸáÿßÿ™ ÿ™ÿπŸÑŸäŸÖŸäÿ©
                </h2>
            </div>

            <div class="empty-state">
                <div class="empty-icon">üé•</div>
                <h3 class="empty-title">ŸÖÿ≠ÿ™ŸàŸâ ŸÇÿßÿØŸÖ!</h3>
                <p class="empty-description">ÿ≥ŸÜÿ∂ŸäŸÅ ŸÖŸÉÿ™ÿ®ÿ© ÿ¥ÿßŸÖŸÑÿ© ŸÖŸÜ ÿßŸÑŸÅŸäÿØŸäŸàŸáÿßÿ™ ÿßŸÑÿ™ÿπŸÑŸäŸÖŸäÿ© ŸÇÿ±Ÿäÿ®ÿßŸã</p>
            </div>
        </section>

        <!-- Word Scramble Game Page -->
        <section id="wordScramble" class="page">
            <button class="back-btn" onclick="navigateTo('tests')">
                <span>‚Üí</span>
                <span>ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™</span>
            </button>

            <div class="breadcrumb">
                <span class="breadcrumb-item" onclick="navigateTo('dashboard')">
                    <span>üè†</span>
                    <span>ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span>
                </span>
                <span class="breadcrumb-separator">‚Üê</span>
                <span class="breadcrumb-item" onclick="navigateTo('tests')">ÿßÿÆÿ™ÿ®ÿ± ŸÜŸÅÿ≥ŸÉ</span>
                <span class="breadcrumb-separator">‚Üê</span>
                <span class="breadcrumb-item">ÿßŸÑŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ®ÿπÿ´ÿ±ÿ©</span>
            </div>

            <div class="section-header">
                <h2 class="section-title">
                    <span class="section-icon">üî§</span>
                    ÿßŸÑŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ®ÿπÿ´ÿ±ÿ©
                </h2>
            </div>

            <!-- Game HUD -->
            <div class="game-hud">
                <div class="game-hud-item">
                    <div class="game-hud-label">ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ</div>
                    <div class="game-hud-value" id="gameLevel">1</div>
                </div>
                <div class="game-hud-item">
                    <div class="game-hud-label">ÿßŸÑŸÜŸÇÿßÿ∑</div>
                    <div class="game-hud-value game-points" id="gamePoints">0</div>
                </div>
                <div class="game-hud-item">
                    <div class="game-hud-label">ÿßŸÑÿ≥ÿ§ÿßŸÑ</div>
                    <div class="game-hud-value" id="gameProgress">1/1</div>
                </div>
            </div>

            <!-- Game Progress Bar -->
            <div class="game-progress-track">
                <div class="game-progress-fill" id="gameProgressBar"></div>
            </div>

            <!-- Game Question Card -->
            <div class="game-question-card">
                <div class="game-clue-box">
                    <div class="game-clue-label">üí° ÿßŸÑÿØŸÑŸäŸÑ / L'indice</div>
                    <div class="game-clue-text" id="gameClueText">Centre nerveux du corps</div>
                </div>

                <div class="game-answer-section">
                    <div class="game-answer-label">‚úèÔ∏è ÿ±ÿ™Ÿëÿ® ÿßŸÑÿ≠ÿ±ŸàŸÅ ŸáŸÜÿß</div>
                    <div class="game-answer-slots" id="gameAnswerSlots"></div>
                </div>

                <div class="game-choices-section">
                    <div class="game-choices-label">üî° ÿßŸÑÿ≠ÿ±ŸàŸÅ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©</div>
                    <div class="game-letter-choices" id="gameLetterChoices"></div>
                </div>

                <div class="game-actions">
                    <button class="game-btn game-btn-ghost" onclick="resetGameLetters()">‚Ü∫ ÿ•ÿπÿßÿØÿ©</button>
                    <button class="game-btn game-btn-primary" onclick="checkGameAnswer()">‚úî ÿ™ÿ≠ŸÇŸÇ</button>
                </div>
            </div>
        </section>
    </main>

    <!-- Popup -->
    <div class="popup" id="popup" role="dialog" aria-modal="true" aria-labelledby="popupTitle">
        <div class="popup-content">
            <button class="popup-close" id="popupClose" aria-label="ÿ•ÿ∫ŸÑÿßŸÇ">‚úñ</button>
            <div class="popup-loading" id="popupLoading"></div>
            <img class="popup-img" id="popupImg" alt="" style="display: none;">
            <div class="popup-error" id="popupError" style="display: none;">
                <div class="popup-error-icon">‚ö†Ô∏è</div>
                <h3>ÿπÿ∞ÿ±ÿßŸãÿå ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸàÿ±ÿ©</h3>
            </div>
        </div>
    </div>

    <script>
        // Lesson Data Structure
        const lessonsData = {
            nervous: {
                title: 'Le syst√®me nerveux',
                icon: 'üß†',
                paragraphs: [
                    { title: "L'organisation", image: 'nervous_1.jpg', description: 'Organisation g√©n√©rale du syst√®me nerveux' },
                    { title: 'La sensibilit√© consciente', image: 'nervous_2.jpg', description: 'Les r√©cepteurs sensoriels et la perception' },
                    { title: 'La motricit√© volontaire', image: 'nervous_3.jpg', description: 'Contr√¥le des mouvements volontaires' },
                    { title: 'Motricit√© involontaire', image: 'nervous_4.jpg', description: 'Les r√©flexes automatiques' },
                    { title: 'Hygi√®ne', image: 'nervous_5.jpg', description: 'Pr√©servation de la sant√© du syst√®me nerveux' }
                ]
            },
            muscular: {
                title: 'Le syst√®me musculaire',
                icon: 'üí™',
                paragraphs: [
                    { title: 'R√¥le du muscle', image: 'muscular_1.jpg', description: 'Fonctions et types de muscles' },
                    { title: 'Structure', image: 'muscular_2.jpg', description: 'Anatomie et structure musculaire' },
                    { title: 'Besoins', image: 'muscular_3.jpg', description: 'Besoins √©nerg√©tiques et nutritionnels' }
                ]
            },
            immune: {
                title: 'Le syst√®me immunitaire',
                icon: 'üõ°Ô∏è',
                paragraphs: [
                    { title: 'Immunit√© naturelle', image: 'immune_1.jpg', description: 'Les d√©fenses non sp√©cifiques' },
                    { title: 'Immunit√© sp√©cifique', image: 'immune_2.jpg', description: 'La r√©ponse immunitaire adaptative' },
                    { title: 'Organes lympho√Ødes', image: 'immune_3.jpg', description: 'Composants du syst√®me immunitaire' },
                    { title: 'Renforcement', image: 'immune_4.jpg', description: 'Comment renforcer son immunit√©' }
                ]
            },
            dysfunction: {
                title: 'Dysfonctionnements immunitaires',
                icon: 'üî¥',
                paragraphs: [
                    { title: 'Allergies', image: 'dysfunction_1.jpg', description: 'R√©action excessive du syst√®me immunitaire' },
                    { title: 'SIDA', image: 'dysfunction_2.jpg', description: 'Le syndrome d\'immunod√©ficience acquise' }
                ]
            }
        };

        // State Management
        let currentPage = 'dashboard';
        let currentLesson = null;

        // DOM Elements
        const menuBtn = document.getElementById('menuBtn');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const sidebarItems = document.querySelectorAll('.sidebar-item');
        const navbar = document.querySelector('.navbar');
        const popup = document.getElementById('popup');
        const popupClose = document.getElementById('popupClose');
        const popupImg = document.getElementById('popupImg');
        const popupLoading = document.getElementById('popupLoading');
        const popupError = document.getElementById('popupError');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            setupEventListeners();
            checkScrollPosition();
        });

        // Setup Event Listeners
        function setupEventListeners() {
            // Menu Toggle
            menuBtn.addEventListener('click', toggleSidebar);
            sidebarOverlay.addEventListener('click', closeSidebar);

            // Sidebar Navigation
            sidebarItems.forEach(item => {
                item.addEventListener('click', () => handleSidebarClick(item));
                item.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        handleSidebarClick(item);
                    }
                });
            });

            // Popup Close
            popupClose.addEventListener('click', closePopup);
            popup.addEventListener('click', (e) => {
                if (e.target === popup) closePopup();
            });

            // Keyboard Navigation
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    if (popup.classList.contains('active')) {
                        closePopup();
                    } else if (sidebar.classList.contains('active')) {
                        closeSidebar();
                    }
                }
            });

            // Scroll Effect
            window.addEventListener('scroll', checkScrollPosition);
        }

        // Toggle Sidebar
        function toggleSidebar() {
            const isActive = sidebar.classList.toggle('active');
            sidebarOverlay.classList.toggle('active');
            menuBtn.setAttribute('aria-expanded', isActive);
            
            if (isActive) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }

        // Close Sidebar
        function closeSidebar() {
            sidebar.classList.remove('active');
            sidebarOverlay.classList.remove('active');
            menuBtn.setAttribute('aria-expanded', 'false');
            document.body.style.overflow = '';
        }

        // Handle Sidebar Click
        function handleSidebarClick(item) {
            const page = item.getAttribute('data-page');
            navigateTo(page);
            closeSidebar();
        }

        // Navigate to Page
        function navigateTo(page) {
            // Update active states
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
            
            const pageElement = document.getElementById(page);
            const sidebarItem = document.querySelector(`.sidebar-item[data-page="${page}"]`);
            
            if (pageElement) {
                pageElement.classList.add('active');
                currentPage = page;
            }
            
            if (sidebarItem) {
                sidebarItem.classList.add('active');
            }

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Open Lesson
        function openLesson(lessonKey) {
            const lesson = lessonsData[lessonKey];
            if (!lesson) {
                console.error('Lesson not found:', lessonKey);
                return;
            }

            currentLesson = lessonKey;
            
            // Update lesson details page
            document.getElementById('lessonTitleText').textContent = lesson.title;
            document.getElementById('lessonIcon').textContent = lesson.icon;
            document.getElementById('currentLessonBreadcrumb').textContent = lesson.title;
            
            // Clear and populate paragraphs
            const container = document.getElementById('lessonParagraphs');
            container.innerHTML = '';
            
            lesson.paragraphs.forEach(para => {
                const card = createParagraphCard(para);
                container.appendChild(card);
            });

            // Navigate to lesson details page
            navigateTo('lessonDetails');
        }

        // Create Paragraph Card
        function createParagraphCard(para) {
            const card = document.createElement('div');
            card.className = 'card';
            card.tabIndex = 0;
            card.setAttribute('role', 'button');
            card.onclick = () => showImage(para.image, para.title);
            card.onkeypress = (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    showImage(para.image, para.title);
                }
            };

            card.innerHTML = `
                <div class="card-icon">üìÑ</div>
                <h4 class="card-title">${para.title}</h4>
                <p class="card-description">${para.description}</p>
            `;

            return card;
        }

        // Show Image in Popup
        function showImage(imagePath, title = '') {
            popup.classList.add('active');
            popupImg.style.display = 'none';
            popupError.style.display = 'none';
            popupLoading.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // Set title for accessibility
            popupImg.setAttribute('alt', title || 'ÿµŸàÿ±ÿ© ÿßŸÑÿØÿ±ÿ≥');
            
            // Load image
            const img = new Image();
            img.onload = () => {
                popupLoading.style.display = 'none';
                popupImg.src = imagePath;
                popupImg.style.display = 'block';
            };
            
            img.onerror = () => {
                popupLoading.style.display = 'none';
                popupError.style.display = 'block';
                console.error('Failed to load image:', imagePath);
            };
            
            img.src = imagePath;
        }

        // Close Popup
        function closePopup() {
            popup.classList.remove('active');
            document.body.style.overflow = '';
            
            // Reset popup content after animation
            setTimeout(() => {
                popupImg.style.display = 'none';
                popupError.style.display = 'none';
                popupImg.src = '';
            }, 300);
        }

        // Check Scroll Position
        function checkScrollPosition() {
            if (window.scrollY > 20) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        }

        // Accessibility: Trap focus in popup when open
        popup.addEventListener('keydown', (e) => {
            if (e.key === 'Tab' && popup.classList.contains('active')) {
                e.preventDefault();
                popupClose.focus();
            }
        });

        // ===== GAME LOGIC =====
        const gameData = {
            answer: 'CERVEAU',
            clue: 'Centre nerveux du corps / ÿßŸÑŸÖÿ±ŸÉÿ≤ ÿßŸÑÿπÿµÿ®Ÿä ŸÑŸÑÿ¨ÿ≥ŸÖ',
            extraLetters: ['T', 'M', 'N', 'K', 'P'],
            points: 20
        };

        let gameState = {
            selectedLetters: [],
            availableLetters: [],
            points: 0,
            isChecking: false
        };

        // Show Game
        function showGame(type) {
            navigateTo('gamePage');
            initGame();
        }

        // Initialize Game
        function initGame() {
            gameState = {
                selectedLetters: [],
                availableLetters: [],
                points: 0,
                isChecking: false
            };

            // Build shuffled letters
            const answerLetters = gameData.answer.split('');
            const allLetters = [...answerLetters, ...gameData.extraLetters];
            gameState.availableLetters = shuffleArray(allLetters).map((letter, i) => ({
                id: i,
                letter: letter.toUpperCase(),
                used: false
            }));

            // Update UI
            document.getElementById('gameLevel').textContent = '1';
            document.getElementById('gamePoints').textContent = '0';
            document.getElementById('gameProgress').textContent = '1/1';
            document.getElementById('gameProgressBar').style.width = '0%';
            document.getElementById('gameClueText').textContent = gameData.clue;
            document.getElementById('gameAnswerSlots').innerHTML = '';
            document.getElementById('gameAnswerSlots').className = 'game-answer-slots';

            renderGameChoices();
        }

        // Render Letter Choices
        function renderGameChoices() {
            const container = document.getElementById('gameLetterChoices');
            container.innerHTML = '';
            
            gameState.availableLetters.forEach(item => {
                const btn = document.createElement('button');
                btn.className = 'game-letter-btn';
                btn.innerHTML = `<span>${item.letter}</span>`;
                btn.disabled = item.used;
                btn.onclick = () => selectGameLetter(item.id);
                container.appendChild(btn);
            });
        }

        // Select Letter
        function selectGameLetter(id) {
            if (gameState.isChecking) return;
            
            const item = gameState.availableLetters.find(l => l.id === id);
            if (!item || item.used) return;

            item.used = true;
            gameState.selectedLetters.push(id);

            // Add to answer slots
            const slot = document.createElement('div');
            slot.className = 'game-letter-slot';
            slot.textContent = item.letter;
            slot.dataset.id = id;
            slot.onclick = () => removeGameLetter(id);

            document.getElementById('gameAnswerSlots').appendChild(slot);
            renderGameChoices();
        }

        // Remove Letter
        function removeGameLetter(id) {
            if (gameState.isChecking) return;
            
            const item = gameState.availableLetters.find(l => l.id === id);
            if (!item) return;

            item.used = false;
            gameState.selectedLetters = gameState.selectedLetters.filter(x => x !== id);

            const slot = document.querySelector(`.game-letter-slot[data-id="${id}"]`);
            if (slot) slot.remove();

            renderGameChoices();
        }

        // Reset Letters
        function resetGameLetters() {
            if (gameState.isChecking) return;
            
            gameState.selectedLetters = [];
            gameState.availableLetters.forEach(l => l.used = false);
            
            const slotsContainer = document.getElementById('gameAnswerSlots');
            slotsContainer.innerHTML = '';
            slotsContainer.className = 'game-answer-slots';
            
            renderGameChoices();
        }

        // Check Answer
        function checkGameAnswer() {
            if (gameState.isChecking) return;

            const answer = gameState.selectedLetters
                .map(id => gameState.availableLetters.find(l => l.id === id)?.letter)
                .join('');

            if (answer.length === 0) {
                // Empty answer
                const slots = document.getElementById('gameAnswerSlots');
                slots.style.borderColor = 'var(--accent)';
                setTimeout(() => { slots.style.borderColor = ''; }, 600);
                return;
            }

            if (answer.toUpperCase() === gameData.answer.toUpperCase()) {
                handleGameCorrect();
            } else {
                handleGameWrong();
            }
        }

        // Handle Correct Answer
        function handleGameCorrect() {
            gameState.isChecking = true;
            gameState.points += gameData.points;

            // Animate slots
            document.querySelectorAll('.game-letter-slot').forEach((s, i) => {
                setTimeout(() => s.classList.add('correct-letter'), i * 80);
            });
            
            document.getElementById('gameAnswerSlots').classList.add('correct');
            document.getElementById('gameProgressBar').style.width = '100%';

            setTimeout(() => {
                showGameFeedback(true);
                createGameParticles();
            }, 600);
        }

        // Handle Wrong Answer
        function handleGameWrong() {
            gameState.isChecking = true;
            const slotsContainer = document.getElementById('gameAnswerSlots');
            slotsContainer.classList.add('wrong');

            setTimeout(() => {
                slotsContainer.classList.remove('wrong');
                resetGameLetters();
                gameState.isChecking = false;
            }, 800);
        }

        // Show Feedback
        function showGameFeedback(success) {
            const messages = [
                'ÿ•ÿ¨ÿßÿ®ÿ© ŸÖŸÖÿ™ÿßÿ≤ÿ©! üåü',
                'ÿ±ÿßÿ¶ÿπ ÿ¨ÿØÿßŸã! üöÄ',
                'ÿ£ÿ≠ÿ≥ŸÜÿ™! ‚≠ê',
                'ŸÖŸÖÿ™ÿßÿ≤! üí™'
            ];

            const modal = document.createElement('div');
            modal.className = 'game-feedback show';
            modal.innerHTML = `
                <div class="game-feedback-card">
                    <span class="game-feedback-icon">‚úÖ</span>
                    <div class="game-feedback-title success">ÿ•ÿ¨ÿßÿ®ÿ© ÿµÿ≠Ÿäÿ≠ÿ©!</div>
                    <div class="game-feedback-msg">${messages[Math.floor(Math.random() * messages.length)]}</div>
                    <div class="game-feedback-points">+${gameData.points} ŸÜŸÇÿ∑ÿ© üèÖ</div>
                    <button class="game-btn game-btn-primary" onclick="closeGameFeedback()">ÿ±ÿßÿ¶ÿπ! ‚Üê</button>
                </div>
            `;
            
            document.body.appendChild(modal);
            document.getElementById('gamePoints').textContent = gameState.points;
        }

        // Close Feedback
        function closeGameFeedback() {
            const modal = document.querySelector('.game-feedback');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => modal.remove(), 300);
            }
            gameState.isChecking = false;
        }

        // Create Particles
        function createGameParticles() {
            const container = document.createElement('div');
            container.className = 'game-particles';
            document.body.appendChild(container);

            const colors = ['#6366f1', '#f59e0b', '#10b981', '#06b6d4', '#ec4899'];
            
            for (let i = 0; i < 40; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'game-particle';
                    
                    const size = Math.random() * 10 + 5;
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight;
                    const tx = (Math.random() - 0.5) * 300;
                    const ty = (Math.random() - 0.5) * 300;
                    
                    particle.style.cssText = `
                        width: ${size}px;
                        height: ${size}px;
                        left: ${x}px;
                        top: ${y}px;
                        background: ${colors[Math.floor(Math.random() * colors.length)]};
                        --tx: ${tx}px;
                        --ty: ${ty}px;
                    `;
                    
                    container.appendChild(particle);
                    setTimeout(() => particle.remove(), 1500);
                }, i * 20);
            }

            setTimeout(() => container.remove(), 2000);
        }

        // Shuffle Array
        function shuffleArray(arr) {
            const array = [...arr];
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // ===== WORD SCRAMBLE GAME =====
        const gameState = {
            currentQuestion: {
                answer: 'CERVEAU',
                clue: 'centre nerveux du corps / ÿßŸÑŸÖÿ±ŸÉÿ≤ ÿßŸÑÿπÿµÿ®Ÿä ŸÑŸÑÿ¨ÿ≥ŸÖ',
                points: 20
            },
            selectedLetters: [],
            availableLetters: [],
            points: 0,
            isChecking: false
        };

        // Initialize game
        function initGame() {
            const answerLetters = gameState.currentQuestion.answer.split('');
            const extraLetters = ['T', 'M', 'N', 'K', 'P'];
            const allLetters = [...answerLetters, ...extraLetters];
            
            gameState.availableLetters = shuffleArray(allLetters).map((letter, i) => ({
                id: i,
                letter,
                used: false
            }));

            renderGameChoices();
            updateGameHUD();
        }

        // Render choices
        function renderGameChoices() {
            const container = document.getElementById('gameLetterChoices');
            if (!container) return;
            
            container.innerHTML = '';
            gameState.availableLetters.forEach(item => {
                const btn = document.createElement('button');
                btn.className = 'game-letter-btn';
                btn.innerHTML = `<span>${item.letter}</span>`;
                btn.disabled = item.used;
                btn.onclick = () => selectGameLetter(item.id);
                container.appendChild(btn);
            });
        }

        // Select letter
        function selectGameLetter(id) {
            if (gameState.isChecking) return;
            
            const item = gameState.availableLetters.find(l => l.id === id);
            if (!item || item.used) return;

            item.used = true;
            gameState.selectedLetters.push(id);

            const slot = document.createElement('div');
            slot.className = 'game-letter-slot';
            slot.textContent = item.letter;
            slot.dataset.id = id;
            slot.onclick = () => removeGameLetter(id);

            const container = document.getElementById('gameAnswerSlots');
            if (container) container.appendChild(slot);

            renderGameChoices();
        }

        // Remove letter
        function removeGameLetter(id) {
            if (gameState.isChecking) return;
            
            const item = gameState.availableLetters.find(l => l.id === id);
            if (!item) return;

            item.used = false;
            gameState.selectedLetters = gameState.selectedLetters.filter(x => x !== id);

            const slot = document.querySelector(`.game-letter-slot[data-id="${id}"]`);
            if (slot) slot.remove();

            renderGameChoices();
        }

        // Reset
        function resetGameLetters() {
            if (gameState.isChecking) return;
            
            gameState.selectedLetters = [];
            gameState.availableLetters.forEach(l => l.used = false);
            
            const answerSlots = document.getElementById('gameAnswerSlots');
            if (answerSlots) {
                answerSlots.innerHTML = '';
                answerSlots.className = 'game-answer-slots';
            }
            
            renderGameChoices();
        }

        // Check answer
        function checkGameAnswer() {
            if (gameState.isChecking) return;
            
            const answer = gameState.selectedLetters
                .map(id => gameState.availableLetters.find(l => l.id === id)?.letter)
                .join('');

            if (answer.toUpperCase() === gameState.currentQuestion.answer.toUpperCase()) {
                handleGameCorrect();
            } else if (answer.length === 0) {
                shakeGameEmpty();
            } else {
                handleGameWrong();
            }
        }

        // Correct
        function handleGameCorrect() {
            gameState.isChecking = true;
            gameState.points += gameState.currentQuestion.points;

            document.querySelectorAll('.game-letter-slot').forEach((s, i) => {
                setTimeout(() => s.classList.add('correct-letter'), i * 80);
            });
            
            const answerSlots = document.getElementById('gameAnswerSlots');
            if (answerSlots) answerSlots.classList.add('correct');

            setTimeout(() => {
                showGameFeedback();
                spawnGameParticles();
                showGameFloatingPoints(gameState.currentQuestion.points);
                updateGameHUD();
            }, 500);
        }

        // Wrong
        function handleGameWrong() {
            gameState.isChecking = true;
            const answerSlots = document.getElementById('gameAnswerSlots');
            if (answerSlots) answerSlots.classList.add('wrong');

            setTimeout(() => {
                if (answerSlots) answerSlots.classList.remove('wrong');
                resetGameLetters();
                gameState.isChecking = false;
            }, 800);
        }

        // Shake
        function shakeGameEmpty() {
            const slots = document.getElementById('gameAnswerSlots');
            if (!slots) return;
            
            slots.style.borderColor = 'var(--accent)';
            slots.style.boxShadow = '0 0 20px rgba(245, 158, 11, 0.4)';
            
            setTimeout(() => {
                slots.style.borderColor = '';
                slots.style.boxShadow = '';
            }, 600);
        }

        // Feedback
        function showGameFeedback() {
            const messages = [
                'ÿ•ÿ¨ÿßÿ®ÿ© ŸÖŸÖÿ™ÿßÿ≤ÿ©! üåü',
                'ÿ±ÿßÿ¶ÿπ ÿ¨ÿØÿßŸã! üöÄ',
                'ÿ£ÿ≠ÿ≥ŸÜÿ™! ‚≠ê',
                'ÿ•ÿ¨ÿßÿ®ÿ© ÿµÿ≠Ÿäÿ≠ÿ©! üí™'
            ];

            const overlay = document.createElement('div');
            overlay.className = 'game-feedback active';
            overlay.innerHTML = `
                <div class="game-feedback-card">
                    <span class="game-feedback-icon">‚úÖ</span>
                    <div class="game-feedback-title success">ÿ•ÿ¨ÿßÿ®ÿ© ÿµÿ≠Ÿäÿ≠ÿ©!</div>
                    <div class="game-feedback-msg">${messages[Math.floor(Math.random() * messages.length)]}</div>
                    <div class="game-feedback-points">+${gameState.currentQuestion.points} ŸÜŸÇÿ∑ÿ© üèÖ</div>
                    <button class="game-btn game-btn-primary" onclick="closeGameFeedback()">ÿ±ÿßÿ¶ÿπ! ‚ú®</button>
                </div>
            `;
            
            document.body.appendChild(overlay);
        }

        // Close feedback
        function closeGameFeedback() {
            const feedback = document.querySelector('.game-feedback');
            if (feedback) feedback.remove();
        }

        // Update HUD
        function updateGameHUD() {
            const pointsEl = document.getElementById('gamePoints');
            if (pointsEl) pointsEl.textContent = gameState.points;
            
            const progressBar = document.getElementById('gameProgressBar');
            if (progressBar) progressBar.style.width = '100%';
        }

        // Particles
        function spawnGameParticles(count = 30) {
            const colors = ['#6366f1', '#f59e0b', '#10b981', '#06b6d4'];
            
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const p = document.createElement('div');
                    const size = Math.random() * 12 + 6;
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight;
                    const dur = (Math.random() * 1 + 0.8).toFixed(2);

                    p.style.cssText = `
                        width:${size}px; height:${size}px;
                        left:${x}px; top:${y}px;
                        background:${colors[Math.floor(Math.random() * colors.length)]};
                        position: fixed; border-radius: 50%; pointer-events: none; z-index: 150;
                        animation: particleFly ${dur}s ease-out forwards;
                    `;
                    
                    document.body.appendChild(p);
                    setTimeout(() => p.remove(), parseFloat(dur) * 1000);
                }, i * 30);
            }
        }

        // Floating points
        function showGameFloatingPoints(pts) {
            const el = document.createElement('div');
            el.className = 'float-points';
            el.textContent = `+${pts}`;
            el.style.cssText = 'left:50%; top:50%; transform:translate(-50%,-50%);';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 1600);
        }

        // CSS for particles
        if (!document.getElementById('particleStyle')) {
            const style = document.createElement('style');
            style.id = 'particleStyle';
            style.textContent = `
                @keyframes particleFly {
                    0% { transform: translate(0,0) scale(1); opacity: 1; }
                    100% { transform: translate(${(Math.random()-0.5)*300}px, ${(Math.random()-0.5)*300}px) scale(0); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        }

        // Init on navigate
        const origNav = navigateTo;
        navigateTo = function(page) {
            origNav(page);
            if (page === 'wordScramble') setTimeout(initGame, 100);
        };
    </script>
</body>
</html>
